<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Debian on Forget me not...</title>
    <link>https://henrich.github.io/blog/categories/debian/</link>
    <description>Recent content in Debian on Forget me not...</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja-JP</language>
    <managingEditor>henrich@debian.org (Hideki Yamane)</managingEditor>
    <webMaster>henrich@debian.org (Hideki Yamane)</webMaster>
    <lastBuildDate>Fri, 04 Jan 2019 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="https://henrich.github.io/blog/categories/debian/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>DDのおしごと</title>
      <link>https://henrich.github.io/blog/2019/01/04/dd%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Fri, 04 Jan 2019 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2019/01/04/dd%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description>倉敷さんがビルドマシンが家のNASで遅いという話をしていたので、CloudGarageさんの開発者支援制度でお借りしているホストを一台セットアップして渡した。外堀を埋める方向。</description>
    </item>
    
    <item>
      <title>debootstrapを速くするには</title>
      <link>https://henrich.github.io/blog/2019/01/04/debootstrap%E3%82%92%E9%80%9F%E3%81%8F%E3%81%99%E3%82%8B%E3%81%AB%E3%81%AF/</link>
      <pubDate>Fri, 04 Jan 2019 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2019/01/04/debootstrap%E3%82%92%E9%80%9F%E3%81%8F%E3%81%99%E3%82%8B%E3%81%AB%E3%81%AF/</guid>
      <description>debootstrapは最低限のDebian環境の作成に使われるツール。pbuilderやcowbuilder（とその環境を使うpiuparts）などのツールの裏側でも動くし、dockerイメージの裏側もコイツ。ちなみに環境構築にはリポジトリから必要なパッケージを取得してくるので、それなりに時間がかかる（しかも最初はaptも使えないのでwgetで取得するんだぜ？）。うーむ。
で、どうやって時間を短縮するか？というと、以下のような選択肢がある。
 ローカルミラーをセットアップしてそれを参照する ローカルプロキシをセットアップしてそれを参照する ローカルキャッシュをセットアップしてそれを参照する   1のミラーはまるっとDebianリポジトリをコピーするやり方。  クライアントが何十台、スペックによっては何百台とかあっても対応できる どのパッケージでもLAN内にあるので取得が早い でも、ミラーを構築するには最低でも数百GBのディスクを使うことになるし、更新も追随するとなるとそれなりにトラフィックが生じる ぶっちゃけオーバースペックすぎる。牛刀をもって鶏頭を裂く、的な。 あと、必ずそのミラー参照するようになるので、Laptopで作って移動したときには面倒になるかも  2のプロキシはsquidなどのサーバーを立てるやり方。  取得したパッケージだけをキャッシュするのでディスク容量がミラーより格段に少なくて済む ミラーと同様に複数のマシンからも参照可能 debootstrap 1.0.96からsquid-deb-proxy-clientをインストールしておくと、squid-deb-proxyで立ち上げたプロキシサーバーを自動的に参照するようになる。apt-cacherなどだと一々プロキシがどこにあるのかを指定しないといけないので、squid-deb-proxyマジおすすめ  3のキャッシュは--cache-dirオプションを使って、適当なところにキャッシュしておいたdebパッケージを参照するやり方。`  debootstrap 1.0.97`から実装済み。一台だけでやるならこれで十分。 --cache-dir=/home/henrich/tmp/cachedirというように、このオプションでは絶対パスで参照するのが必要。~/tmp/cachedirの様な指定はできない。   あと、リポジトリのミラーはdebootstrap 1.0.85からdeb.debian.orgを参照するようになっている。これはFastly提供のCDNだけど、個人的には自分が運用しているdebian-mirror.sakura.ne.jpを使っている。これは異常があったらすぐ気付くように、というドッグフーディングの側面もあるが、利用者がそんなに多くないので快適だということもある。もっと使っていいのよ？
最後に、記述時の最新であるdebootstrap 1.0.112はMr.FAIことThomas Langeさんのハックによってパッケージ依存関係の最適化（これもaptが使われてはいない）が図られているので、随分と時間が短縮されている。
結論：debootstrap 1.0.112以降を使おう。debootstrapはshell script＋embedded perlコードというアレなやつなので、環境依存が極小であり、どのバージョンでも動くよ。バグがあったら教えてくださいな。</description>
    </item>
    
    <item>
      <title>めんてなのおしごと</title>
      <link>https://henrich.github.io/blog/2019/01/04/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Fri, 04 Jan 2019 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2019/01/04/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description>Ultimate Debian DatabaseのBug search Cleaner viewから。
 xfce4関連パッケージがメンテナアドレスがaliothの消滅に伴う無効化されたもので、experimentalでは直ってるというしょーもない状態だったので状況を調査。  どうやら4.13というupstreamではdevelopment releaseな奴でアップデートしたからunstableに放り込むのがためらわれてるようだ fedoraとxubuntuはそれでも4.13リリースをぶち込んだ模様。 というのを踏まえて「どーする？」という質問を投げた→「わかってる、4.14がリリースされたらそれを入れる」という回答。んーしばらくは放置か…。  uglifyjsのFTBFS、experimentalでは直ってるよ、という話  semver（セマンティックバージョニング）でわかるように大幅に変更されてるから、依存関係で不具合でるんじゃね？という理由でexperimentalに隔離されているようだ では、ということでお手軽にapr-rdependesで依存パッケージの確認 emscriptenは内部に古い古いuglifyjs持ってるみたい… lavaはソース落としてみたけど、バージョン指定の情報は特に無し。 node-grunt-contrib-uglifyは新しいバージョンならサポートしてる node-uglifyjs-webpack-pluginも新しいバージョンならサポートしてる ruby-uglifierも新しいバージョンならサポートしている というのを踏まえると、node-grunt-contrib-uglify、node-uglifyjs-webpack-plugin、ruby-uglifierを最新バージョンにしてexperimentalに上げる、がいいのかな。    powermockがJava9ではビルドできないけど、新しいupstreamバージョンならOKよ、という話  やってみようとしたらビルドシステムからまるっと変わっていて（maven→gradle）、どうしようかな、というところ。gradle全然使ったこと無いのよね… Debian Wikiのページにあった。gradle-debian-helperパッケージをBuild-Dependsに加えて、debian/rulesでdh $@ -with buildsystem=gradle&amp;hellip;って間違ってるやん--buildsystem=gradleだよね…。   * What went wrong: A problem occurred configuring root project &#39;powermock&#39;. &amp;gt; Could not resolve all files for configuration &#39;:classpath&#39;. &amp;gt; Could not resolve org.springframework.build.gradle:propdeps-plugin:0.0.7. Required by: project : &amp;gt; No cached version of org.</description>
    </item>
    
    <item>
      <title>めんてなのおしごと</title>
      <link>https://henrich.github.io/blog/2019/01/03/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Thu, 03 Jan 2019 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2019/01/03/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description>ruby-netrcパッケージのバグのtriage。どうもテストケースがbuilddだと問題になるようだ（これは後に間違いだと気付く）。assert_equal File.join(Dir.pwd, &#39;.netrc&#39;), Netrc.default_pathが以下のような結果になる。
1) Failure: TestNetrc#test_missing_environment [/&amp;lt;&amp;lt;PKGBUILDDIR&amp;gt;&amp;gt;/test/test_netrc.rb:203]: --- expected +++ actual @@ -1,2 +1 @@ -# encoding: ASCII-8BIT -&amp;quot;/&amp;lt;&amp;lt;PKGBUILDDIR&amp;gt;&amp;gt;/.netrc&amp;quot; +&amp;quot;/build/.netrc&amp;quot;  &amp;lt;&amp;lt;PKGBUILDDIR&amp;gt;&amp;gt;なんて変わった値が放り込まれてしまっている?…と思ったら、これは「builddでのログ出力で置き換えてるだけ」なのか。手元でビルドする時はcowbuilderでやってしまっていたので、sbuild環境を用意するのにも時間が&amp;hellip;あれ？sbuildでも普通にビルドできちゃった。というか、builddでも以前にビルド自体は出来てるのか…。はてな？
バグレポートを再度よく読み、テスト部分を再確認。
def test_missing_environment nil_home = nil ENV[&amp;quot;HOME&amp;quot;], nil_home = nil_home, ENV[&amp;quot;HOME&amp;quot;] assert_equal File.join(Dir.pwd, &#39;.netrc&#39;), Netrc.default_path ensure ENV[&amp;quot;HOME&amp;quot;], nil_home = nil_home, ENV[&amp;quot;HOME&amp;quot;] end  default_pathでgrep…。
def self.default_path File.join(ENV[&#39;NETRC&#39;] || home_path, netrc_filename) end  あー、これだ。NETRCが存在しない場合にhome_path、つまりは上記のエラーになる環境では/buildが指定されてるのにもかかわらず、ビルドをしているDir.pwdは別、ということだろうな。さて、どういうふうにして回避するかね…
p nil_home p ENV[&amp;quot;HOME&amp;quot;] p Netrc.home_path  とすると
&amp;quot;/home/henrich&amp;quot; nil &amp;quot;/build/ruby-netrc-0.11.0&amp;quot;  が返る。あれ？予想と違う。home_pathは/build/ruby-netrc-0.11.0なのか。ENV[&amp;quot;HOME&amp;quot;]がnilであっても問題なし、ということを言いたいとすれば以下のようにするのが良さそう
--- a/test/test_netrc.</description>
    </item>
    
    <item>
      <title>めんてなのおしごと</title>
      <link>https://henrich.github.io/blog/2019/01/02/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Wed, 02 Jan 2019 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2019/01/02/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description>ubuntu-keyringパッケージの変更の続き。build時にもファイルチェックをするようにしたり。shellscriptではtempdir=`mktemp -d`のようにしてtempdirを指定したのだけど、makeでは$$tempdirが空になるので、$(CURDIR)/debian/tmp 決め打ちで逃げた…どうやるのがいいんでしょうねぇ？
autopkgtest実施時にパッケージの分割・リネームの結果、パッケージリポジトリに該当のパッケージがなくてパッケージを引っ張ってこようとしてエラーとなるという予想外のエラー。気付くまでにまたしても時間を要した。とりあえずsudo cowbuilder --login --inputfile a.deb --inputfile b.deb --save-after-execとしてchroot環境に入りapt install /buildd/a.deb /buildd/b.debなどとしてローカル環境に加えて様子見→エラー解消。やれやれ。しかし、これを失念してその後でpiupartsでパッケージチェックしたらdebconf関連ファイルがそのまま残ってるぞ、というエラーになって苦悶した（sudo cowbuilder --createしなおして対処）。
 パッケージを分割した インストールするkeyringをUbuntuのパッケージを参考にして変更した debconfで質問される /etc/apt/trusted.gpg.d にsymlinkを張るkeyringをUbuntuのパッケージを参考に調整した autopkgtestをまともなものにした build時にもautopkgtest相当が動作するようにした  今回の変更はこんな感じか。パッケージ分割で新しいバイナリパッケージが増えるからNEW queue待ちに。どれだけかかるのかな。。
そしてアップロード後もエラーを踏む。
Source-only uploads to NEW are not allowed.  なんと、そうだったのか。最近はarch=allパッケージとかも手元でビルドしたバイナリではなくbuilddでビルドしたものを、と思ってgit-buildpackageのオプションで--git-pbuilder-options=&amp;quot;--source-only-changes&amp;quot;などとしていたのが仇に。
 淡々とjcodingsパッケージをアップデート。 grcompilerに投稿されてたパッチをマージ。自分の作った地雷を踏むという失態を。  upstreamが4.3を出してるのだけど、これをマージした所ビルドも通らない代物だったのでそのまま放置してたのを忘れてパッチを当ててビルドが通らないものとして悩んでしまった。一旦debian/4.2ブランチを作ってこっちに。 で、全部終わってpushしようとしたらrejectされる…って他のメンテナが変更を加えてた。変更をgit format-patchして一旦逃してから全削除→git cloneして当て直し。そしてメンテナの作業ミスを見つけて直すなども。やれやれ。    </description>
    </item>
    
    <item>
      <title>めんてなのおしごと</title>
      <link>https://henrich.github.io/blog/2019/01/01/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Tue, 01 Jan 2019 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2019/01/01/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description>ubuntu-keyringパッケージの変更の続き。Ubuntu側と内容を合わせる形に変更で、パッケージを増やしたり。.installファイルの指定が微妙でインストールされるファイルが被ってしまう問題、[0-9]*で数字だけ指定されるかと思ったら、そうでなかった。。。
keyrings/ubuntu-keyring-[0-9]*[!a-z]-archive.gpg usr/share/keyrings/  というようにした。</description>
    </item>
    
    <item>
      <title>めんてなのおしごと</title>
      <link>https://henrich.github.io/blog/2018/12/31/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Mon, 31 Dec 2018 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2018/12/31/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description> 先日のMerge Requestに「amd64 specificで指定してるけど、これi386でも動くんじゃない？」というコメントがメンテナから来たのでx86指定に変更した→マージされました。 昨日のruby-loofahパッケージの更新で脆弱性修正したのだが、Debian9 &amp;ldquo;stretch&amp;rdquo;では変更をbackportしないといけない（まぁ、Debian Security Advisoryを出すほどでもない＝no-dsaと見なされる可能性もあるけど）。根本的な変更はword１個消すだけ＋XSS対策の追加コードだけだったので、作業してセキュリティチームに連絡だけしといた。 なんかKernelで問題が起きてるぞ、これは意図的なのか？というバグレポートを横目で見たので、以前の省電力化Kernel configパッチの影響であり意図的なものだということだけを伝えるreplyをした（changelogにきちんと書いたんだがな…）。その際、大元のFedoraでの変更をしたRHの人にCC入れておいた。 ubuntu-keyringパッケージを最新に更新。もうちょっと待とうかとも思ったのだけど、testが壊れたものをアップロードしてたのと前のアップロードの鍵はチェックでfailする謎の状態だったので。  次はUbuntu側とパッケージ名を合わせる変更を入れ込むかね…   </description>
    </item>
    
    <item>
      <title>めんてなのおしごと</title>
      <link>https://henrich.github.io/blog/2018/12/30/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Sun, 30 Dec 2018 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2018/12/30/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description>Debian10 &amp;ldquo;buster&amp;rdquo;リリースの障害となるRelease Criticalバグ一覧から簡単に直せそうなのを探して作業。
 ruby-slimパッケージ、New upstream version導入でFTBFS修正 ruby-sinatra-contribパッケージ、New upstream version導入でFTBFS修正 ruby-loofahパッケージ、New upstream version導入でCVE修正  </description>
    </item>
    
    <item>
      <title>めんてなのおしごと</title>
      <link>https://henrich.github.io/blog/2018/12/29/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Sat, 29 Dec 2018 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2018/12/29/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description>１文字でFTBFSが直せるやつだったのでやっといた</description>
    </item>
    
    <item>
      <title>めんてなのおしごと</title>
      <link>https://henrich.github.io/blog/2018/12/27/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Thu, 27 Dec 2018 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2018/12/27/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description>たまたまbug reportを見かけてmerge request作ったほうが話が早い奴だと思ったのでやっといた。</description>
    </item>
    
    <item>
      <title>めんてなのおしごと</title>
      <link>https://henrich.github.io/blog/2018/12/24/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Mon, 24 Dec 2018 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2018/12/24/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description>debian-installerのコンポーネントの一つ、partman-lvmでのバグ修正が含まれたパッケージがようやくアップロードされた。
もう一つ、重要なコンポーネントのdebootstrapの昨日の変更だけど、リリースマネージャーが難色を示しているのでamd64以外でもチェックすることに。
 手元の放置してたBBBを設定、参考ページを元に初期化し直し stretchベースのイメージをSDカードに。ちなみにxz圧縮したままで展開せずに書き込めるのでGNOMEなかなか優秀である。 ２つ前のバージョン（1.0.110~bpo9+1）のがstretch-backportsに入ってるので、そちらをインストールして stretch / buster / sid のchroot環境を作る。あとは各環境で dpkg --get-selections &amp;gt; distro.txt のようにしてパッケージ一覧を作成。次にunstableから debootstrap 1.0.112 を入れて同じことを繰り返し。この後で diff をとってそれぞれのchrootで違いが出てるのかどうかをチェックする、という流れ。しかし、SDカードへの書き込みは遅く、マシンも非力なためにめっちゃ時間が…  ちなみにBBB＝armhfアーキテクチャでも特に変化は見られませんでした。そりゃそうだ、と思うのですが…  あとはarm64アーキテクチャであるdebian.orgのporterboxマシンにsshログインしたものの、password設定わからず（どうなってるんだっけ？）sudo出来なかったのでこちらは明日以降で…  </description>
    </item>
    
    <item>
      <title>めんてなのおしごと</title>
      <link>https://henrich.github.io/blog/2018/12/23/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Sun, 23 Dec 2018 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2018/12/23/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description>debootstrapをアップデート。Mr.FAIのハックによってスピードが格段に速くなった。一応、前のバージョンと比較して取得パッケージの差異が無いのは確認済みだが、なんかregressionがあるのも嫌なので Planet Debian にも載ってるblogで告知もしておいた。</description>
    </item>
    
    <item>
      <title>DDのおしごと</title>
      <link>https://henrich.github.io/blog/2018/12/22/dd%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Sat, 22 Dec 2018 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2018/12/22/dd%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description>アップロードがrejectされてたので
$ dcut dm --uid 0x9394F354891D7E07 --allow fonts-mmcedar Uploading commands file to ftp.upload.debian.org (incoming: /pub/UploadQueue/) Picking DM Youhei SASAKI &amp;lt;uwabami@gfd-dennou.org&amp;gt; with fingerprint 66A4EA704FE240558D6AC2E69394F354891D7E07 Uploading henrich-1545485367.dak-commands to ftp-master  として佐々木さんのDM uploadを設定しておいた。</description>
    </item>
    
    <item>
      <title>めんてなのおしごと</title>
      <link>https://henrich.github.io/blog/2018/12/22/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Sat, 22 Dec 2018 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2018/12/22/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description>作業途中で夏から放置してたubuntu-keyringパッケージをアップロード。debconfを使ってデフォルトではtrusted GPG keyringとしては扱わないように変更。
さらにnew upstream release対応を手元で作成。Ubuntuでのrulesを見るとGPGファイルのチェックをしてたので、それを参考にしてautopkgtestを追加。いろいろGPGのオプションを指定する必要があった。
 --trusted-key &amp;quot;$trusted_keyid&amp;quot; のようにして署名鍵を信頼しないとエラーになる。通常なら自分のtrustdbに追加されてる感じだけど、テスト環境にはそんなのはないし、fetchするのもネット環境必須になってしまうので。もう一つの解としてはローカルに落としておく、だけど、それは大仰かな。 --no-auto-check-trustdb を付けないとtrustdbのチェックにやたら時間がかかるので  先日、camlimagesパッケージの変更をmerge requestしたのだけど、最小なテスト作っても意図通りにならなかったな、ということだけ覚えていたのでメモしておく。何をどうやったのか、は思い出したら書こう…
fonts-kanjistrokeordersパッケージをアップデート
久々にinstallation guide訳を更新。</description>
    </item>
    
    <item>
      <title>めんてなのおしごと</title>
      <link>https://henrich.github.io/blog/2018/12/21/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Fri, 21 Dec 2018 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2018/12/21/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description> tdiary-contrib の tdiary-mode が Release Critical bug が出ていたのが解消できてないのをメーリングリストに投げたのだけど、実は依存パッケージ起因で tdiary-mode 悪くなかったという。直してもらってめでたしめでたし、なのだが、さらに elpa の管理下にしてもらうといいなーと言ったら佐々木さんがパッチ書いてくれて更新してくれた。言ってみるもんだね。 bundlerの git ls-files -z が何故使われるのか？という疑問。「git管理下にないファイルを含めないため」という理由では？という意見を頂いた。うーん、そうするとupstreamでのDirで置き換えは厳しいか…。かと言ってgitを使うのもsourceパッケージを展開してのautopkgtestではエラーになるよね…地道に対応するしか無い？それは負けな気がする…。  </description>
    </item>
    
    <item>
      <title>めんてなのおしごと</title>
      <link>https://henrich.github.io/blog/2018/12/20/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Thu, 20 Dec 2018 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2018/12/20/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description> 水野さんのsilversearcher-agパッケージをアップロードした。  あわせてsalsa.debian.orgにリポジトリを追加し、権限を付与した さらにsilversearcher-ag-elも追加  birdfontパッケージをアップデートした  </description>
    </item>
    
    <item>
      <title>めんてなのおしごと</title>
      <link>https://henrich.github.io/blog/2018/12/16/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Sun, 16 Dec 2018 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2018/12/16/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description> ruby-rspec-instafailパッケージをアップデートした ruby-childprocessパッケージをアップデートした twitterで不具合話を拾ったので、fonts-unfonts-coreパッケージをアップデートした  fontforgeコマンドの指定で Open(&amp;quot;UnDinaruLight.ttf&amp;quot;) のようにくくってやらないとエラーになることに気付くまでに時間を要してしまった…。   </description>
    </item>
    
    <item>
      <title>めんてなのおしごと</title>
      <link>https://henrich.github.io/blog/2018/12/15/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Sat, 15 Dec 2018 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2018/12/15/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description>ruby-arubaパッケージをアップデートした。
autopkgtestが debian/control での Testsuite: autopkgtest-pkg-ruby 行を起点として実施される（実際は debian/ruby-tests.rake ファイルが実行されるのかな？）のだけど、この際に gemspec ファイルの中身が実行される。ところがここで git コマンドを使ってファイルの有無を確認するという形になってしまっていて、git への依存関係がないのでコケるという悲しい状態だった。
s.files = `git ls-files`.split(&amp;quot;\n&amp;quot;) s.test_files = `git ls-files -- {spec,features}/*`.split(&amp;quot;\n&amp;quot;) s.executables = `git ls-files -- bin/*`.split(&amp;quot;\n&amp;quot;).map{ |f| File.basename(f) }  しかもどうやらこれはbundlerの雛形がそうなってるという…何なんだRuby。daiさんに Dir 使うというのを教えてもらってパッチを作って対処、Bug#910953をクローズ。
diff --git a/aruba.gemspec b/aruba.gemspec index c6ac3e7..1581e98 100644 --- a/aruba.gemspec +++ b/aruba.gemspec @@ -40,9 +40,9 @@ With aruba &amp;gt;= 1.0 there will be breaking changes. Make sure to read https://gith EOS end - s.files = `git ls-files`.</description>
    </item>
    
    <item>
      <title>めんてなのおしごと</title>
      <link>https://henrich.github.io/blog/2018/10/02/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Tue, 02 Oct 2018 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2018/10/02/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description> [jcodings]()と[jruby-joni]()のアップデート。jcodingsではメンテナアドレスを戻した際に書き間違えるというポカをやらかして、慌てて再アップロードした。jruby-joniはアップロード後にさらにupstreamが新しいバージョンを出しているようだったので、こちらは後日対処予定。 os-autoinst、arm* やら mips* などでテストがコケるのだが何故だろう？と思って手元のBBBでテストしたが、qemuを起動している時にメモリサイズが足らなくてqemuが立ち上がらずにテストが実行できずにエラーになってしまった…builddの方は問題なく動作しているので、手元での問題。ログでwgetがらみのエラーが出てたところがあったので、build-dependsに追加してみたが、はてさて。  </description>
    </item>
    
    <item>
      <title>DDのおしごと</title>
      <link>https://henrich.github.io/blog/2018/10/01/dd%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Mon, 01 Oct 2018 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2018/10/01/dd%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description>依頼を受けたので
$ dcut dm --uid 0xD22C1A883455D448 --allow fcitx-dbus-status fcitx-imlist gntp-send groonga growl-for-linux hal-flash libsylph sylfilter sylph-searcher sylpheed groonga-normalizer-mysql  として林さんのDM uploadを設定しておいた。</description>
    </item>
    
    <item>
      <title>HP Elitebook 830 G5で苦しむ</title>
      <link>https://henrich.github.io/blog/2018/09/26/hp-elitebook-830-g5%E3%81%A7%E8%8B%A6%E3%81%97%E3%82%80/</link>
      <pubDate>Wed, 26 Sep 2018 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2018/09/26/hp-elitebook-830-g5%E3%81%A7%E8%8B%A6%E3%81%97%E3%82%80/</guid>
      <description>debian-installerが何をやっても画面がブランクになってしまってDebianがインストールできないという。</description>
    </item>
    
    <item>
      <title>めんてなのおしごと</title>
      <link>https://henrich.github.io/blog/2018/09/25/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Tue, 25 Sep 2018 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2018/09/25/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description>birdfontパッケージ、kfreebsd-i386とkfreebsd-amd64で同じエラー…。  rm debian/birdfont/usr/share/birdfont/Roboto-Regular.ttf rm: cannot remove &#39;debian/birdfont/usr/share/birdfont/Roboto-Regular.ttf&#39;: No such file or directory make[1]: *** [debian/rules:20: override_dh_auto_install] Error 1  なぜエラーになるのか？ debian/rules をちょっと直して様子見するか？…と思ったが、既にdebian/patchesで削ったのを準備済みだったのでアップロードした
 vmdk-stream-converter の tag push を忘れていた… libsql-splitstatement-perl を更新 libdbix-class-optimisticlocking-perl を更新 libdbix-class-schema-config-perl は Perlのバージョンアップに伴ってだろうか、モジュールが欠けてたので追加。  $ cat debian/upstream/metadata --- Archive: CPAN Contact: Brian Phillips &amp;lt;bphillips@cpan.org&amp;gt; Name: DBIx-Class-OptimisticLocking Repository: http://github.com/brianphillips/dbix-class-optimisticlocking  debian/upstream/metadata はこういうのを書くのかぁ。</description>
    </item>
    
    <item>
      <title>めんてなのおしごと</title>
      <link>https://henrich.github.io/blog/2018/09/24/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Mon, 24 Sep 2018 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2018/09/24/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description>os-autoinstパッケージを放置していたので、アップデート作業を実施。
 upstreamをpullしてdebian/sidブランチにmerge ビルド…するも、testでエラーが出る。しかもランダム。どうも test が serial に実施される前提で書かれていて、ある test での input file が別の test でも使われてたりする＆その test 実施後に削除されたりするので、順序によっては input file が存在しない、ということでエラーになったりするようだ。仕方がないので --no-parallel オプションを dh_auto_test につけて make -j1 で実行されるようにする それでも 02-test_ocr.t だけがコケ続けたりする（上記の際にはごくごく稀にだが成功したりする…）。t/02-test_ocr.t.log を見てみる…。  FAIL: 02-test_ocr.t =================== Use of uninitialized value in index at ../needle.pm line 44. Use of uninitialized value $bmwqemu::vars{&amp;quot;PRJDIR&amp;quot;} in addition (+) at ../needle.pm line 45. [2018-09-24T07:08:55.0584 UTC] [debug] MATCH(bootmenu-ocr.ref:1.00) Tesseract Open Source OCR Engine v4.0.0-beta.4-50-g07acc with Leptonica Warning. Invalid resolution 0 dpi.</description>
    </item>
    
    <item>
      <title>めんてなのおしごと</title>
      <link>https://henrich.github.io/blog/2018/09/23/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Sun, 23 Sep 2018 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2018/09/23/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description> vmdk-stream-converter が、aliothを指したままだったのでとりあえず更新。python2依存なんだよね、patchはあるのでupstreamが対応してくれないものか。 sphere はupstreamが開発停止＆VMWare自体がライブラリを出していてそちらは既にDebianにあるのでそちらを推す格好で削除依頼。  </description>
    </item>
    
    <item>
      <title>めんてなのおしごと</title>
      <link>https://henrich.github.io/blog/2018/09/22/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
      <pubDate>Sat, 22 Sep 2018 00:00:00 +0000</pubDate>
      <author>henrich@debian.org (Hideki Yamane)</author>
      <guid>https://henrich.github.io/blog/2018/09/22/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
      <description> jcodingsが何故か細かくバージョンアップが繰り返されたので追従。1.0.34が&amp;ndash;deleyedでまだ入ってなかったので、それが入ってからになるように調整。 jruby-joniも同様。patchのrefreshが面倒くさい。最新のjcodings依存になっているようなので、ビルドはまだ。  </description>
    </item>
    
  </channel>
</rss>