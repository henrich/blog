<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Forget me not... on Forget me not...</title>
    <link>https://henrich.github.io/blog/</link>
    <description>Recent content in Forget me not... on Forget me not...</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja-JP</language>
    <managingEditor>henrich@debian.org (Hideki Yamane)</managingEditor>
    <webMaster>henrich@debian.org (Hideki Yamane)</webMaster>
    <copyright>2015-  Hideki Yamane</copyright>
    <lastBuildDate>Fri, 01 Jan 2100 06:58:34 +0900</lastBuildDate>
    <atom:link href="/blog/" rel="self" type="application/rss+xml" />
    
      
        
          <item>
            <title>future work</title>
            <link>https://henrich.github.io/blog/2100/01/01/future-work/</link>
            <pubDate>Fri, 01 Jan 2100 06:58:34 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2100/01/01/future-work/</guid>
            <description>

&lt;h1 id=&#34;支援について&#34;&gt;支援について&lt;/h1&gt;

&lt;p&gt;このBlogにあるようなDebian関連の作業について支援して頂ける方、henrich @ debian.org 宛に&lt;a href=&#34;http://amzn.to/2u7MfE5&#34;&gt;Amazonギフト券&lt;/a&gt;でのコントリビューションをお待ちしております :-)&lt;/p&gt;

&lt;h2 id=&#34;とりあえずのtodoリスト&#34;&gt;とりあえずのTodoリスト&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;openQAをビルドできるように、必要なツールをパッケージにする

&lt;ul&gt;
&lt;li&gt;Selenium::Remote::Driver &lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=839569&#34;&gt;Bug#839569&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://build.opensuse.org/package/view_file/openSUSE:Factory/openQA/openQA.spec?expand=1&#34;&gt;specファイル&lt;/a&gt;参照&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://lintian.debian.org/maintainer/pkg-fonts-devel@lists.alioth.debian.org.html&#34;&gt;pkg-fonts-devel&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;afdkoをビルドできるように、必要なツールをパッケージにする&lt;/li&gt;
&lt;li&gt;ttf- パッケージを可能な限りdropする（現在55個）&lt;/li&gt;
&lt;li&gt;duplicate font fileをなくす&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;webwmlリポジトリをcvsからgitに変換する。その際にはcommitしたユーザー情報を用意する&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=719557&#34;&gt;mecabパッケージのバグ修正&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=796882&#34;&gt;hyperv-daemonsの修正&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;sylpheed関連パッケージでGPG鍵確認処理を追加&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2018/01/25/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Thu, 25 Jan 2018 23:05:20 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/25/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=888134&#34;&gt;screenfetchをdockerで動かしたら一部の出力でcommand not foundが出てきた、というレポート&lt;/a&gt;。でもテストしたVPSで作ったminimalなdebootstrap環境だと再現できねぇな？と思って該当の所を見る&amp;hellip;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;        thermal=&amp;quot;/sys/class/hwmon/hwmon0/temp1_input&amp;quot;
        if [ -e $thermal ]; then
                temp=$(bc &amp;lt;&amp;lt;&amp;lt; &amp;quot;scale=1; $(cat $thermal)/1000&amp;quot;)
        fi
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;おおぅ、なるほど。/sys/class/hwmon/hwmon0/temp1_inputなんてVMの環境下には生えてないからスルーしてたわけだ。よし、確認のため実マシンでdebootstrap&amp;hellip;しようとしたらdashのバグの影響を踏んでdebootstrap出来ない！&amp;hellip;別マシンで過去のchrootな環境を見つけてそこでテストして漸く確認。ついでにpgrepもcommand not found出てきたのはホスト側でXが動いているからか（報告者のdockerでは動いてなかったのだろう）。&lt;/p&gt;

&lt;p&gt;で、チャチャッと変更して&amp;hellip;問題はこのrepositoryはaliothにまだあることでsalsaへのインポートを試してないこと。どうやるんだっけ&amp;hellip;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://lists.debian.org/debian-devel-announce/2017/12/msg00003.html&#34;&gt;debian-devel-announceなメール&lt;/a&gt;から&lt;a href=&#34;https://wiki.debian.org/Salsa/Doc&#34;&gt;Debian Wiki&lt;/a&gt;へ、そして&lt;a href=&#34;http://www.df7cb.de/blog/2017/Salsa_batch_import.html&#34;&gt;該当の情報&lt;/a&gt;を取得。&lt;/li&gt;
&lt;li&gt;スクリプトをコピーする&lt;/li&gt;
&lt;li&gt;GitLabのTokenを初めて生成してスクリプトに埋め込み &lt;code&gt;./salsa-import.sh screenfetch&lt;/code&gt; という感じで実行&amp;hellip;一瞬で終わって「え？マジ終わり？」という感想。&lt;/li&gt;
&lt;li&gt;無事にインポートされてるのを確認&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ここからはいつもどおりビルド→アップロード。gitのremote repo設定からaliothを消してsalsaを追加しておく。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>Maintainer Work 2018 01 23</title>
            <link>https://henrich.github.io/blog/2018/01/23/maintainer-work-2018-01-23/</link>
            <pubDate>Tue, 23 Jan 2018 21:16:11 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/23/maintainer-work-2018-01-23/</guid>
            <description>&lt;p&gt;snapperパッケージのメンテ。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=880144&#34;&gt;aptが動いたときの自動スナップショットを無効にできないか？調整する設定を追加してはどうか？という提案&lt;/a&gt;。「デフォルト有効ならいいように思う」とコメント。&lt;/li&gt;
&lt;li&gt;e2fsprogsがessentialパッケージでなくなるのに伴い、&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=887292&#34;&gt;e2fsprogsに依存してるみたいなんだけど、明示的にしてくれる？&lt;/a&gt;というバグレポート。ext4サポートがそもそも動いてなかったから明示的にdisableにするかーという結論なんだけど、確認方法がわからないとリリースできない。&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2018/01/17/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Wed, 17 Jan 2018 19:33:48 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/17/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;新しい&lt;a href=&#34;http://debian-mirror.sakura.ne.jp&#34;&gt;debian-mirror.sakura.ne.jp&lt;/a&gt;の稼働に伴い&lt;a href=&#34;http://old-debian-mirror.sakura.ne.jp/munin/&#34;&gt;munin&lt;/a&gt;の設定を微調整。&lt;/li&gt;
&lt;li&gt;新旧ミラーサーバーにて、自ホストをサーバーにして apt でパッケージを取得してみた。旧サーバーが65MB程度のところ、新サーバーだと95MB程度は出るので1.5倍というところか（乱暴だけど）。&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.documentfoundation.org/show_bug.cgi?id=115066&#34;&gt;LibO on macOSで日本語パック当てるとフォントでかいよ問題をレポートしておいた&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2018/01/16/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Tue, 16 Jan 2018 21:22:06 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/16/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;qrencodeパッケージの&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=677984#13&#34;&gt;バグレポートにコメント追加しておいた&lt;/a&gt;。数日様子を見てクローズするのが良いだろうと思う。&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://tracker.debian.org/news/901773&#34;&gt;fonts-sawarabi-minchoパッケージをアップロード&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;salsaに移行する際にgitのURLが「git@salsa.debian.org:fonts-team/fonts-sawarabi-mincho.git」のように設定されているのにモニョモニョしている。今までは「git+ssh://anonscm.debian.org/&amp;hellip;git」のようにプロトコル指定だったが、これを追加するとエラーになる。でもgitコマンドはSSH使ってsalsaにアクセスしている。何故だ。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2018/01/15/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Mon, 15 Jan 2018 19:18:27 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/15/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;昨日苦しんだ問題を&lt;a href=&#34;https://github.com/fukuchi/libqrencode/issues/117&#34;&gt;upstreamにissue報告した&lt;/a&gt;。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2018/01/14/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Sun, 14 Jan 2018 22:06:00 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/14/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;qrencodeパッケージがちょっと古くなっているようだ。&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=887144&#34;&gt;upstreamのサイトが移動してるね、ということでBTS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ついでに自分の手元でアップデート出来ないかな？と作業して大方できた。新規追加されたtestスクリプトがconfigureを引数なしでハードコードしていて実行されるのでパッケージのインストールが壊れるという問題があったのに引っかかって小一時間潰してしまった&amp;hellip;。&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>subversionからお引っ越し</title>
            <link>https://henrich.github.io/blog/2018/01/13/subversion%E3%81%8B%E3%82%89%E3%81%8A%E5%BC%95%E3%81%A3%E8%B6%8A%E3%81%97/</link>
            <pubDate>Sat, 13 Jan 2018 21:51:19 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/13/subversion%E3%81%8B%E3%82%89%E3%81%8A%E5%BC%95%E3%81%A3%E8%B6%8A%E3%81%97/</guid>
            <description>&lt;p&gt;www.debian.or.jpのコンテンツはSubversionで管理していて、コミット可能なのはJPのメンバーだけだったのだけど、salsa.debian.orgに引っ越して見通しを良くしてみたくなったので作業した。&lt;/p&gt;

&lt;p&gt;svn2gitを使いコンバート。&lt;/p&gt;

&lt;p&gt;非常にわかりづらい（というか導線がない？）のだけど、GitLabにOrganizationというかTeamというかを登録するページからdebianjp-teamとして登録し、適当なsub projectとしてwebを作り、コンバートしたGit repositoryを突っ込む。&lt;/p&gt;

&lt;p&gt;Ansibleで&lt;a href=&#34;https://cloudgarage.jp/&#34;&gt;CloudGarage&lt;/a&gt;のVPSへデプロイ（ここで現状のサイトコンテンツの更新手順に更新漏れを見つけたり）。CloudGarageさんは&lt;a href=&#34;https://cloudgarage.jp/dap/&#34;&gt;開発者支援プログラム&lt;/a&gt;を使わせてもらっていて助かる。相変わらず書いたplaybook.ymlがちょっと出来のいいバッチファイル程度なのが気になるけど、仕方がない。&lt;/p&gt;

&lt;p&gt;とまぁ、そんなこんなで時間を使った。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2018/01/08/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Mon, 08 Jan 2018 19:55:35 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/08/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://tracker.debian.org/news/900074&#34;&gt;fonts-oradano-mincho-gsrrをアップロード&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://tracker.debian.org/news/900087&#34;&gt;birdfontをアップロード&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ミラーサーバーのリソースがCPUを中心に余ってるので、GitLab Runnerにホストを提供しようと思ったのだけども、salsa-adminに問い合わせた所「無理かもー」ともらった。排他的にサービスを提供する、という点だけがネック。&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2018/01/07/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Sun, 07 Jan 2018 13:47:02 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/07/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;年末年始で間が空いてしまった&amp;hellip;。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://tracker.debian.org/news/899819&#34;&gt;libxmlbirdをアップデート&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;年末年始でようやく新しいミラーサーバー new-debian-mirror.sakura.ne.jp の設定に手を付けました（ありがとうございます＞さくらインターネットさま）。初めてのAnsible&amp;hellip;ですが、今のところはバッチファイルよりちょっとマシ程度の状況。やはり複数サーバー運用して整理するのが必要とかじゃないとモチベーションが湧かないですね&amp;hellip;。まぁ、次にセットアップが必要になった場合は一発流せばいいだけというのは気楽にはなりました。&lt;/p&gt;

&lt;p&gt;新しいサーバーにはbcacheを使っています、&lt;a href=&#34;https://wiki.archlinux.jp/index.php/Bcache&#34;&gt;ありがとうArch Wiki&lt;/a&gt;。ディスクを大量に積むのもよいのですが、既に後2年ぐらいは戦えそうな容量を頂けたので、SSDでキャッシュする方向に走るのが良いかな、と。速度はそこまで出ないにしてもアクセスが多くなっても大丈夫よ、と。&lt;/p&gt;

&lt;p&gt;CacheデバイスのSSDですが、最初はRAID1を設定してもらっていましたが、思い直して設定変更。JBODが選べないので仕方なくRAID0にしました。生まれて初めて使ったよ、RAID0&amp;hellip;。HDDよりは死にづらいかなーというのと、死んでも構わないよねー（負荷が増えるだけ）というのと、容量が欲しかったんや&amp;hellip;というのの3点からRAID0選択と相成りました。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#!/bin/sh

BACKING_DEVICE=/dev/sda3
CACHE_DEVICE=/dev/sdb

make-bcache -B $BACKING_DEVICE -C $CACHE_DEVICE

echo `bcache-super-show $CACHE_DEVICE | grep cset.uuid | awk &#39;{print $2}&#39;` \
 &amp;gt; /sys/block/bcache0/bcache/attach

if [ -f /dev/bcache0 ]; then
  mkfs.xfs /dev/bcache0
else
  echo &amp;quot;There&#39;s no Bcache device.&amp;quot;
fi
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;手作業でやったのを後からまとめ直すと上記のような感じ。短いな&amp;hellip;。チューンしたほうがいい点があるのかもしれませんが、知見がないのでデフォルト値そのまま。ファイルシステムにxfs選んだのは毎度ext?なので、ちょっとは変わったことしたかったのと、btrfsの利点を活かせることはなさそうだよなぁ、という辺りから。&lt;/p&gt;

&lt;p&gt;ufwを実行しようかどうしようか、という辺りとSNMP監視が出来てない風味だよね？というのを確認したら、終わり。そして、切り替え前後でおかしなことが起きたらその対処、と。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;muninの設定続き。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo munin-run http_loadtime auto
http___localhost_.value /etc/munin/plugins/http_loadtime: line 105: -f: command not found
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;$time_binというのが無いようだ。&lt;code&gt;which time&lt;/code&gt; してるだけなのに、見つからない？timeパッケージにあるのだけど、これが入ってないんだな&amp;hellip;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo munin-run acpi
/etc/munin/plugins/acpi: 1: eval: bc: not found
thermal_zone0.value
/etc/munin/plugins/acpi: 1: eval: bc: not found
thermal_zone1.value

$ sudo apt install bc

$ sudo munin-run acpi
thermal_zone0.value 49.000
thermal_zone1.value 40.000
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;これはbc。&lt;/p&gt;

&lt;p&gt;Suggestsにあるのが多いパターンなのだけど、それを確認して入れろ、というのはしんどくないかなぁ。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2017/12/23/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Sat, 23 Dec 2017 20:17:49 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2017/12/23/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://tracker.debian.org/news/895990&#34;&gt;apt-listchangesのpo訳が取り込まれました&lt;/a&gt;。&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://salsa.debian.org/&#34;&gt;https://salsa.debian.org/&lt;/a&gt; が動き始めたようだ。リポジトリは自動で移動したりするのだろうか？&lt;/li&gt;
&lt;li&gt;とりあえず二要素認証をOnに&amp;hellip;と思って有効にしようとしたら、まずはQRコードをGoogle Authenticatorで読み取って有効にしないといけなかった。その上でYubiKeyを追加。何故この手順が必要なのだろう？デバイスが1つだけじゃない、ということが重要？&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;ul&gt;
&lt;li&gt;boot時のエラーメッセージが気になったので、BIOSを上げてみようと思い立つ。そう言えば昔grubから直接ISOイメージ起動した記憶が&amp;hellip;と思って&lt;a href=&#34;http://www.thinkwiki.org/wiki/BIOS_Upgrade&#34;&gt;調べる&lt;/a&gt;と&lt;a href=&#34;https://packages.debian.org/stretch/grub-imageboot&#34;&gt;grub-imageboot&lt;/a&gt;というツールがあったのでインストール、&lt;a href=&#34;https://download.lenovo.com/pccbbs/mobiles/j5uj58ww.txt&#34;&gt;該当のBIOSのISOイメージ&lt;/a&gt;をダウンロードして、bootできるようにして再起動&amp;hellip;したのだけども、うんともすんとも言わず。仕方がないのでUSBメモリに書き出す方法の方で対応した。&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apt install genisoimage
$ geteltorito biosimage.iso &amp;gt; biosupdate.img
$ sudo dd if=biosupdate.img of=/dev/sdb bs=512K
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;BIOSは最新になった、でも消えない。。。ってあれ、これmicrocodeって言ってるからCPUじゃね？ということで &lt;code&gt;apt install intel-microcode&lt;/code&gt; で直った（&lt;a href=&#34;https://tracker.debian.org/pkg/intel-microcode&#34;&gt;最新のパッケージはbackports提供&lt;/a&gt;なので、Stretchの人はbackportsから入れると良い）。AMDなCPUの人もamd-microcodeで。どちらもnon-freeコンポーネントに含まれてるが、まぁbinaryだしどうしようもないだろうなぁ。TPMのエラーもBIOSで有効にしたら消えた。残ってるのはACPIなエラーだけ。&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2017/12/17/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Sun, 17 Dec 2017 17:42:42 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2017/12/17/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;&lt;a href=&#34;https://dev.gnupg.org/T3619&#34;&gt;GnuPGのバグを見つけたのでレポートしておきました&lt;/a&gt;。あとLFの人が書いてるガイドに&lt;a href=&#34;https://github.com/lfit/itpol/issues/27&#34;&gt;Issue&lt;/a&gt;と&lt;a href=&#34;https://github.com/lfit/itpol/pull/26&#34;&gt;PR&lt;/a&gt;。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2017/12/11/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Mon, 11 Dec 2017 21:01:31 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2017/12/11/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://tracker.debian.org/news/895478&#34;&gt;fonts-ricty-diminishedを更新&lt;/a&gt;（GPGキーのテストをしていたらsignキーを間違えてたのでアップロードがものすごく遅くなった&amp;hellip;）&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://tracker.debian.org/news/896167&#34;&gt;os-autoinstのしょうもないミスを指摘されたので修正&lt;/a&gt;。なんで気づかなかったんや。。。&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://tracker.debian.org/news/896165&#34;&gt;jruby-joniの更新&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;ついでに debian/patches 以下をforwardして&lt;a href=&#34;https://github.com/jruby/joni/pull/31&#34;&gt;Pull Request&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>GPGめも - subkey</title>
            <link>https://henrich.github.io/blog/2017/12/04/gpg%E3%82%81%E3%82%82---subkey/</link>
            <pubDate>Mon, 04 Dec 2017 18:55:41 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2017/12/04/gpg%E3%82%81%E3%82%82---subkey/</guid>
            <description>&lt;p&gt;GPGのsubkeyについて。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;たとえば持ち運びを行うlaptopでGPGを使っているが、laptopを紛失盗難したとしたとする。当然、鍵のrevokeが必要になるがこの場合、

&lt;ul&gt;
&lt;li&gt;masterkeyのみの運用だとすると、新しいGPG鍵を作って1から知り合いなどとkeysignを交換してweb of trustを再構築する羽目になる。&lt;/li&gt;
&lt;li&gt;laptopではsubkeyを運用していれば、それをrevokeしてもmasterkeyのweb of trustは失われない。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;そしてprivate masterkeyは通常触らないところに厳重に保管しておける。通常使いはsubkeyで行い、どうしても&amp;hellip;という時にはmasterkeyを使うということができる。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;なるほどねー。&lt;/p&gt;

&lt;p&gt;ちなみにどうしてもという時というのは以下らしい。
   - 他の人の鍵にsignする（キーサインのときですね）、あまりないけど前にしたsignをrevokeする
   - 自分の鍵をrevokeする
   - subkeyを作る・revokeする
   - 有効期限の変更
   - masterkeyのrevoke用の証明書の作成
   - UIDの設定変更&lt;/p&gt;

&lt;p&gt;あー、今だとlaptopにはGPG鍵入れてないけど、これはありかもしれないね。ということで&lt;a href=&#34;https://wiki.debian.org/Subkeys&#34;&gt;Debian WikiでのSubkey作成手順&lt;/a&gt;に従って作ってみる。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ umask 077; tar -cf $HOME/gnupg-backup.tar -C $HOME .gnupg (バックアップ)
$ gpg --list-keys henrich@debian.org (自分のKEYIDを取得)

pub   rsa4096 2009-05-23 [SC] [有効期限: 2019-05-21]    
      58E1222F9696C885A3CD104C5D328D082AAAB140          
uid           [  究極  ] Hideki Yamane (Debian-JP) &amp;lt;henrich@debian.or.jp&amp;gt;  
uid           [  究極  ] Hideki Yamane &amp;lt;henrich@debian.org&amp;gt;
uid           [  究極  ] Hideki Yamane (private) &amp;lt;henrich@iijmio-mail.jp&amp;gt;
sub   rsa4096 2009-05-23 [E] [有効期限: 2019-05-21]

$ gpg --edit-key  58E1222F9696C885A3CD104C5D328D082AAAB140
gpg (GnuPG) 2.2.3; Copyright (C) 2017 Free Software Foundation, Inc.       
This is free software: you are free to change and redistribute it.         
There is NO WARRANTY, to the extent permitted by law.                      
                                                                   
秘密鍵が利用できます。                                                     
                                                                           
sec  rsa4096/5D328D082AAAB140                                              
     作成: 2009-05-23  有効期限: 2019-05-21  利用法: SC                    
     信用: 究極        有効性: 究極                                        
ssb  rsa4096/95F59E65108820E1                                              
     作成: 2009-05-23  有効期限: 2019-05-21  利用法: E                     
[  究極  ] (1). Hideki Yamane (Debian-JP) &amp;lt;henrich@debian.or.jp&amp;gt;           
[  究極  ] (2)  Hideki Yamane &amp;lt;henrich@debian.org&amp;gt;
[  究極  ] (3)  Hideki Yamane (private) &amp;lt;henrich@iijmio-mail.jp&amp;gt;

gpg&amp;gt; addkey (subkeyの追加)
ご希望の鍵の種類を選択してください:
   (3) DSA (署名のみ)
   (4) RSA (署名のみ)
   (5) Elgamal (暗号化のみ)
   (6) RSA (暗号化のみ)
あなたの選択は? 4  (←Debianパッケージなどで署名が必要なのでこちらを今回は選択)
RSA 鍵は 1024 から 4096 ビットの長さで可能です。
鍵長は? (3072) 4096 (←4096にしたけど、masterkeyより大きなのは選べるのかしら？)
要求された鍵長は4096ビット
鍵の有効期限を指定してください。
         0 = 鍵は無期限
      &amp;lt;n&amp;gt;  = 鍵は n 日間で期限切れ
      &amp;lt;n&amp;gt;w = 鍵は n 週間で期限切れ
      &amp;lt;n&amp;gt;m = 鍵は n か月間で期限切れ
      &amp;lt;n&amp;gt;y = 鍵は n 年間で期限切れ
鍵の有効期間は? (0)1y (masterkeyよりも短いほうが良いそうなのでとりあえず1年にしておく)
鍵は2018年12月04日 18時54分30秒 JSTで期限切れとなります
これで正しいですか? (y/N) y
本当に作成しますか? (y/N) y
たくさんのランダム・バイトの生成が必要です。キーボードを打つ、マウスを動か
す、ディスクにアクセスするなどの他の操作を素数生成の間に行うことで、乱数生
成器に十分なエントロピーを供給する機会を与えることができます。

sec  rsa4096/5D328D082AAAB140
     作成: 2009-05-23  有効期限: 2019-05-21  利用法: SC
     信用: 究極        有効性: 究極
ssb  rsa4096/95F59E65108820E1
     作成: 2009-05-23  有効期限: 2019-05-21  利用法: E
ssb  rsa4096/723BFA427D8774AD (←今回出来たのはこの鍵)
     作成: 2017-12-04  有効期限: 2018-12-04  利用法: S
[  究極  ] (1). Hideki Yamane (Debian-JP) &amp;lt;henrich@debian.or.jp&amp;gt;
[  究極  ] (2)  Hideki Yamane &amp;lt;henrich@debian.org&amp;gt;
[  究極  ] (3)  Hideki Yamane (private) &amp;lt;henrich@iijmio-mail.jp&amp;gt;

gpg&amp;gt; save
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;で、この後の手順は、と&amp;hellip;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;USBメモリに ~/.gnupg をバックアップして&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Here comes the tricky part: you need to remove the private master key.&lt;/code&gt; え？「private masterkeyを削除する」？？？マジか。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;GnuPG 2.1以降なら &lt;code&gt;~/.gnupg/private-keys-v1.d/&amp;lt;KEYGRIP&amp;gt;.key&lt;/code&gt; を削除せよ、と。KEYGRIPはmaster keyの&amp;rdquo;keygrip&amp;rdquo;で、&lt;code&gt;gpg2 --with-keygrip --list-key &amp;lt;YOURMASTERKEYID&amp;gt;&lt;/code&gt; で手に入るぞ、と。ただし、旧バージョンのGnuPGから新しい形式に移行している場合は&lt;code&gt;~/.gnupg/secring.gpg&lt;/code&gt; の方に private master keyがあるかもしれないから、こっちも消せ、と。GnuPG 2.1以前の場合も書いてあるけど、そんな環境使ってる人のことを考えるの面倒なので、原文見てほしい。&lt;/p&gt;

&lt;p&gt;ここまで来たら &lt;code&gt;gpg --edit-key &amp;lt;YOURMASTERKEYID&amp;gt; passwd&lt;/code&gt; でパスフレーズを変更してしまう。これで日常のパスフレーズが漏れても、元々のパスフレーズがわからなければ、たとえprivate master keyにアクセスできても使えないよね&amp;hellip;という、まぁ気休めにはなる？&lt;/p&gt;

&lt;hr /&gt;

&lt;ul&gt;
&lt;li&gt;encryptしたUSBメモリにprivate master key置く、って言ってるけど、何を使ってencryptするんだろね？&lt;/li&gt;
&lt;li&gt;そもそもUSBメモリの耐久性とかどうなのかな、とか。何にバックアップしておくのが正しいのだろう？&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2017/12/03/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Sun, 03 Dec 2017 20:11:08 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2017/12/03/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;先日のDebian勉強会であった人とのキーサインを済ませた。caff便利。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ caff -u 58E1222F9696C885A3CD104C5D328D082AAAB140 &amp;lt;long KEYID&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;で、既にサインして頂いてたのがメールで来てたのをimportしてkeyserverにsendしておく。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ gpg --import ~/*.asc
$ gpg --send-keys &amp;quot;58E1 222F 9696 C885 A3CD  104C 5D32 8D08 2AAA B140&amp;quot;
gpg: 鍵5D328D082AAAB140をhkp://pgp.mit.eduへ送信
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&#34;http://pgp.mit.edu/pks/lookup?op=vindex&amp;amp;search=0x5D328D082AAAB140&#34;&gt;よしよし&lt;/a&gt;。&lt;/p&gt;
</description>
          </item>
        
      
    
  </channel>
</rss>
