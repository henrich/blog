<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Forget me not... on Forget me not...</title>
    <link>https://henrich.github.io/blog/</link>
    <description>Recent content in Forget me not... on Forget me not...</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja-JP</language>
    <managingEditor>henrich@debian.org (Hideki Yamane)</managingEditor>
    <webMaster>henrich@debian.org (Hideki Yamane)</webMaster>
    <copyright>2015-  Hideki Yamane</copyright>
    <lastBuildDate>Fri, 01 Jan 2100 06:58:34 +0900</lastBuildDate>
    <atom:link href="/blog/" rel="self" type="application/rss+xml" />
    
      
        
          <item>
            <title>future work</title>
            <link>https://henrich.github.io/blog/2100/01/01/future-work/</link>
            <pubDate>Fri, 01 Jan 2100 06:58:34 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2100/01/01/future-work/</guid>
            <description>

&lt;h1 id=&#34;支援について&#34;&gt;支援について&lt;/h1&gt;

&lt;p&gt;このBlogにあるようなDebian関連の作業について支援して頂ける方、henrich @ debian.org 宛に&lt;a href=&#34;http://amzn.to/2u7MfE5&#34;&gt;Amazonギフト券&lt;/a&gt;でのコントリビューションをお待ちしております :-)&lt;/p&gt;

&lt;h2 id=&#34;とりあえずのtodoリスト&#34;&gt;とりあえずのTodoリスト&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;openQAをビルドできるように、必要なツールをパッケージにする

&lt;ul&gt;
&lt;li&gt;Selenium::Remote::Driver &lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=839569&#34;&gt;Bug#839569&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://build.opensuse.org/package/view_file/openSUSE:Factory/openQA/openQA.spec?expand=1&#34;&gt;specファイル&lt;/a&gt;参照&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://lintian.debian.org/maintainer/pkg-fonts-devel@lists.alioth.debian.org.html&#34;&gt;pkg-fonts-devel&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;afdkoをビルドできるように、必要なツールをパッケージにする&lt;/li&gt;
&lt;li&gt;fontforgeパッケージの更新をどうするか&lt;/li&gt;
&lt;li&gt;ttf- パッケージを可能な限りdropする（現在55個）&lt;/li&gt;
&lt;li&gt;duplicate font fileをなくす&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;webwmlリポジトリをcvsからgitに変換する。その際にはcommitしたユーザー情報を用意する&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=719557&#34;&gt;mecabパッケージのバグ修正&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://lists.debian.or.jp/pipermail/debian-doc/2017-July/000060.html&#34;&gt;apt-listchangesのpo&lt;/a&gt;をファイルする&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=796882&#34;&gt;hyperv-daemonsの修正&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2017/10/09/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Mon, 09 Oct 2017 14:31:17 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2017/10/09/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;os-autoinstが止まるのをinvestigation。

&lt;ul&gt;
&lt;li&gt;新しいperlモジュールがtestに必要になってたようなので、ビルドする。&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=878042&#34;&gt;ITPもする&lt;/a&gt;。&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=878041&#34;&gt;そのビルドに必要な別のperlモジュールもITPする&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ITPしたのは&lt;a href=&#34;http://pkg-perl.alioth.debian.org/git.html&#34;&gt;$ dtp alioth-repo&lt;/a&gt;という感じでpushしておいた。&lt;/li&gt;
&lt;li&gt;が、やっぱり止まるのは変わらないので&lt;a href=&#34;https://progress.opensuse.org/issues/25844&#34;&gt;issue登録&lt;/a&gt;。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;unidicのサイトが変更されたのに関する&lt;a href=&#34;https://twitter.com/henrich/status/917274260153843712&#34;&gt;ライセンス表記周りの意見&lt;/a&gt;。&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>Fedora Modularity Memo</title>
            <link>https://henrich.github.io/blog/2017/10/08/fedora-modularity-memo/</link>
            <pubDate>Sun, 08 Oct 2017 14:04:21 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2017/10/08/fedora-modularity-memo/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://communityblog.fedoraproject.org/factory-2-0-mean-modularity/&#34;&gt;https://communityblog.fedoraproject.org/factory-2-0-mean-modularity/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://threebean.org/presentations/factory2-devconf17&#34;&gt;The Productization Pipeline and the so-called &amp;ldquo;Factory 2.0&amp;rdquo;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2017/10/08/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Sun, 08 Oct 2017 12:52:13 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2017/10/08/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;忘れないうちに&lt;a href=&#34;https://github.com/os-autoinst/openQA/pull/1465&#34;&gt;１行パッチ&lt;/a&gt;をopenQAに。&lt;/li&gt;
&lt;li&gt;openSUSE asia summitの発表の練習をしてみる。15分にはなんとか収まりそう。&lt;/li&gt;
&lt;li&gt;Debian JPのサイト、9.2リリースを反映しておいた&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2017/10/07/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Sat, 07 Oct 2017 11:50:39 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2017/10/07/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.debian.org/releases/stretch/amd64/release-notes/&#34;&gt;リリースノート&lt;/a&gt;の更新に気がついたので追従しておいた。&lt;/li&gt;
&lt;li&gt;openSUSEをいじってたらsnapperのアップデートがあったが、&lt;a href=&#34;https://github.com/openSUSE/snapper/issues/364&#34;&gt;そのバージョンのタグがgit repositoryに打たれてない。。。&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;openQAやos-autoinstもタグが打たれてないので、&lt;a href=&#34;https://progress.opensuse.org/issues/25826&#34;&gt;お願いを出す&lt;/a&gt;など&amp;hellip;。&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;openQAを漸くビルドし始めたのだけど、早速モジュールが足りないというエラーが&amp;hellip;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Can&#39;t locate Mojolicious/Plugin/AssetPack/Backcompat.pm in @INC (you may need
        to install the Mojolicious::Plugin::AssetPack::Backcompat module)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;なんでupstreamの依存関係には含まれとらんのだろう？&lt;/p&gt;

&lt;p&gt;んじゃさくっとdh-make-perl&amp;hellip;したらcpanに無い？？？どうやら消されているようだ。仕方がないので&lt;a href=&#34;https://github.com/jhthorsen/mojolicious-plugin-assetpack/issues/129&#34;&gt;upstreamに質問&lt;/a&gt;
→ &lt;a href=&#34;http://backpan.cpantesters.org/authors/id/J/JH/JHTHORSEN/&#34;&gt;backpan&lt;/a&gt;というところに消したのは置いてあるよ、と教えてもらった。しかし、&lt;a href=&#34;http://backpan.cpantesters.org/authors/id/J/JH/JHTHORSEN/Mojolicious-Plugin-AssetPack-Backcompat-1.24.readme&#34;&gt;本来これは必要ないはず&lt;/a&gt;、なんだけども&amp;hellip;？&lt;/p&gt;

&lt;p&gt;兎にも角にも、とりあえずぶち込んでみてtestを実行してみると&amp;hellip;またエラーだ。以下が延々と。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Uncaught exception from user code:
        Plugin &amp;quot;bootstrap3&amp;quot; missing, maybe you need to install it?
        Mojolicious::Plugins::load_plugin(Mojolicious::Plugins=HASH(0x562086593f80), &amp;quot;bootstrap3&amp;quot;) called at /usr/share/perl5/Mojolicious/Plugins.pm line 46
        Mojolicious::Plugins::register_plugin(Mojolicious::Plugins=HASH(0x562086593f80), &amp;quot;bootstrap3&amp;quot;, OpenQA::WebAPI=HASH(0x562086540380), HASH(0x5620867fe6d8)) called at /usr/share/perl5/Mojolicious.pm line 186
        Mojolicious::plugin(OpenQA::WebAPI=HASH(0x562086540380), &amp;quot;bootstrap3&amp;quot;, HASH(0x5620867fe6d8)) called at lib/OpenQA/WebAPI.pm line 185
        OpenQA::WebAPI::startup(OpenQA::WebAPI=HASH(0x562086540380)) called at /usr/share/perl5/Mojolicious.pm line 179
        Mojolicious::new(&amp;quot;OpenQA::WebAPI&amp;quot;) called at /usr/share/perl5/Mojo/Server.pm line 17
        Mojo::Server::build_app(Mojo::Server=HASH(0x56208650f6d0), &amp;quot;OpenQA::WebAPI&amp;quot;) called at /usr/share/perl5/Test/Mojo.pm line 247
        Test::Mojo::new(&amp;quot;Test::Mojo&amp;quot;, &amp;quot;OpenQA::WebAPI&amp;quot;) called at ./t/05-scheduler-dependencies.t line 212
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;Can&#39;t locate t/ui/PhantomTest.pm in @INC (you may need to install the t::ui::PhantomTest module) (@INC contains: /build/openqa-4.3/t/ui lib /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.26.0 /usr/local/share/perl/5.26.0 /usr/lib/x86_64-linux-gnu/perl5/5.26 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.26 /usr/share/perl/5.26 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at ./t/ui/01-list.t line 37.
BEGIN failed--compilation aborted at ./t/ui/01-list.t line 37 (#1)
    (F) You said to do (or require, or use) a file that couldn&#39;t be found.
    Perl looks for the file in all the locations mentioned in @INC, unless
    the file name included the full path to the file.  Perhaps you need
    to set the PERL5LIB or PERL5OPT environment variable to say where the
    extra library is, or maybe the script needs to add the library name
    to @INC.  Or maybe you just misspelled the name of the file.  See
    &amp;quot;require&amp;quot; in perlfunc and lib.
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;Uncaught exception from user code:
        Can&#39;t locate dbicdh/_common/deploy/_any/21-seeds.pl in @INC (@INC contains: /build/openqa-4.3/t lib /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.26.0 /usr/local/share/perl/5.26.0 /usr/lib/x86_64-linux-gnu/perl5/5.26 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl/5.26 /usr/share/perl/5.26 /usr/local/lib/site_perl /usr/lib/x86_64-linux-gnu/perl-base) at (eval 1326) line 4.
         at /usr/share/perl5/Context/Preserve.pm line 42.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Mojolicious::Plugin::Bootstrap3 が必要そうだ。t::ui::PhantomTest と dbicdh/_common/deploy/_any/21-seeds.pl  はわからない。。。&lt;/p&gt;

&lt;p&gt;&amp;hellip;とここまで来たところで「upstreamもtestを実行していないので、とりあえず無視」ということにした。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ビルド時には存在しないユーザーにchownしてる

&lt;ul&gt;
&lt;li&gt;ということはpostinstでchownするほうがいいか&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;assetsディレクトリが存在しないので悩んでいたら、4.3の時点では存在せず、masterにはある&amp;hellip;

&lt;ul&gt;
&lt;li&gt;コメントアウトしておく。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;存在しない systemd service ファイルのインストールが&amp;hellip;

&lt;ul&gt;
&lt;li&gt;とりあえず消す&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ということで4.3のビルドは一旦終わった。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;色々と試行錯誤してみたが、多分最新のupstreamだと上記のMojolicious::Plugin周りは解決してるんだろうと思う&amp;hellip;ということで、masterをそのまま 4.3+20170928 としてビルド（9/28が最終コミットだったから）&amp;hellip;うわ、これ Makefile の最初のところで &lt;code&gt;./script/generate-packed-assets&lt;/code&gt; というのを実行して、どうやらネット越しにファイルを取ってくるようになってるぞ&amp;hellip;厄介な&amp;hellip;。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2017/10/06/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Fri, 06 Oct 2017 20:34:59 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2017/10/06/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;Updated &lt;a href=&#34;http://www.debian.or.jp/using/mirror.html&#34;&gt;mirror list on JP site&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;texliveの-docなパッケージがデカくて毎度のアップデートに時間取られるのが嫌だよねーという話から、色々と改善を模索してみる&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=675869&#34;&gt;PDFのバージョンを上げてサイズを落とす作戦&lt;/a&gt;を深掘り。

&lt;ul&gt;
&lt;li&gt;1.4GBが1.0GBになるのは大きいと思う&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=877771&#34;&gt;-docパッケージがRecommendsになっていて引っ張られるのをSuggestsにしてインストールされないようにする作戦&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;そもそもインストールされなければ気にしなくて済むよね、という話&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=877862&#34;&gt;texlive-fullを-docs-と-utilsに分けて、-docなパッケージをインストールしないようにする作戦&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;わかんないから-fullを入れるのだけど、-docはいらないという人は多そうだから&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=877770&#34;&gt;-docパッケージがtexに依存してるのを確認する問題提起&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=877769&#34;&gt;逆に-docなパッケージ内でgzipでcompressされてるのはいいのか？という問題提起&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>実験実験。</title>
            <link>https://henrich.github.io/blog/2017/10/04/%E5%AE%9F%E9%A8%93%E5%AE%9F%E9%A8%93/</link>
            <pubDate>Wed, 04 Oct 2017 20:29:38 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2017/10/04/%E5%AE%9F%E9%A8%93%E5%AE%9F%E9%A8%93/</guid>
            <description>&lt;p&gt;go-apt-cacherによるキャッシュプロキシ実験、今度はもっと大きなパッケージ2つで試してみましょう。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Package: texlive-latex-extra-doc
Download-Size: 384 MB

Package: texlive-pstricks-doc
Download-Size: 248 MB
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;time apt-get download texlive-latex-extra-doc texlive-pstricks-doc&lt;/code&gt; という感じで取得。そして、さらに別のリージョンから試してみたらどうなるか？をやってみました。遠くのほうがいいかな、と西日本リージョンで仮想マシンを作成。そしてテストをしてみた。。。のですが、go-apt-cacherが &lt;code&gt;fatal error: runtime: out of memory&lt;/code&gt; と&lt;a href=&#34;https://github.com/cybozu-go/aptutil/issues/24&#34;&gt;メモリ不足で落ちます&lt;/a&gt;。VMをスケールアップして再度トライしました。&lt;/p&gt;

&lt;p&gt;まずは普通にftp.jp.debian.orgからの取得。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Fetched 412 MB in 36s (11.3 MB/s)
real    0m36.643s

Fetched 412 MB in 30s (13.4 MB/s)
real    0m30.864s

Fetched 412 MB in 26s (15.4 MB/s)
real    0m27.031s
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;次に西日本から取得。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Fetched 412 MB in 19s (20.7 MB/s)
real    0m20.026s

Fetched 412 MB in 19s (21.1 MB/s)
real    0m19.688s

Fetched 412 MB in 18s (22.2 MB/s)
real    0m18.746s
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;東でやってみたら&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Fetched 412 MB in 24s (16.9 MB/s)
real    0m24.203s

Fetched 412 MB in 24s (17.2 MB/s)
real    0m24.598s
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;という感じでリージョンまたぐよりも逆に遅かった…何故だ。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;結論&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;西日本： 21.3MBs
東日本： 17.0MBs
ダイレクト： 13.6 MBs
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;大体25-56%ぐらいの速度アップは望めるが、以前ほどでもない、という印象です。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2017/10/03/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Tue, 03 Oct 2017 20:05:29 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2017/10/03/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://twitter.com/eldesh/status/915031977094389760&#34;&gt;JPのページの誤りの指摘&lt;/a&gt;を頂いたので修正した&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://idcfcloud.com&#34;&gt;IDCFクラウド&lt;/a&gt;のDebianテンプレートで問題を見つけたのでチケットを切っておいた。&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;「VPSサービスに対して、高速なDebianミラーを提供したい」というのを思いつきました。ただ、あらゆるサービスでフルミラーを内部に置くのは難しいでしょうから、キャッシュプロキシを設置して対応するのはどうでしょう？&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;思いついた対象候補

&lt;ul&gt;
&lt;li&gt;さくらのVPS&lt;/li&gt;
&lt;li&gt;ConoHa&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.idcf.jp/cloud/?cl=top_cloud&#34;&gt;IDCFクラウド&lt;/a&gt;(←ここではこれをチョイス)&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;IDCFクラウドは、&lt;a href=&#34;https://www.idcf.jp/cloud/order.html?cl=cl_top#try&#34;&gt;500円クーポン&lt;/a&gt;があったのでこの範囲内で収めたいと思います（この後、さらに1000円クーポンを見つけたので今回の実験には十分ですね）。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Debian8 と Ubuntu16.04 なテンプレートがあったので、こちらから仮想マシンを作ります（ファイアウォールの許可設定を忘れてSSHが通らなかった&amp;hellip;）。&lt;/li&gt;
&lt;li&gt;次に&lt;a href=&#34;https://github.com/cybozu-go/aptutil/releases&#34;&gt;go-apt-cacher&lt;/a&gt;をダウンロードしてちょっと設定して起動します。&lt;/li&gt;
&lt;li&gt;最後に/etc/apt/sources.listをいじってcache proxyを参照するようにします。2つのマシンは同じローカルセグメント内に居るので、apt lineのサーバー名はローカルIPを指定しました。&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code&gt;# apt show openclipart-png
Package: openclipart-png
Source: openclipart
Version: 1:0.18+dfsg-14
Installed-Size: 148 MB
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;有意な差を確認したいので、そこそこの大きさのパッケージを見つけておきました。約150MBなら違いもでるでしょう。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# time apt-get download openclipart-png
Get:1 http://10.6.0.179:3142/debian/ jessie/main openclipart-png all 1:0.18+dfsg-14 [128 MB]
Fetched 128 MB in 10s (12.2 MB/s)          

real    0m10.742s
user    0m2.204s
sys 0m0.420s
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;まだキャッシュされていない状態からの取得は10.7秒（12.2MB/s）&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# time apt-get download openclipart-png
Get:1 http://10.6.0.179:3142/debian/ jessie/main openclipart-png all 1:0.18+dfsg-14 [128 MB]
Fetched 128 MB in 2s (50.3 MB/s)           

real    0m2.758s
user    0m2.028s
sys 0m0.336s

# time apt-get download openclipart-png
Get:1 http://10.6.0.179:3142/debian/ jessie/main openclipart-png all 1:0.18+dfsg-14 [128 MB]
Fetched 128 MB in 2s (43.0 MB/s)          

real    0m3.423s
user    0m2.292s
sys 0m0.396s

# time apt-get download openclipart-png
Get:1 http://10.6.0.179:3142/debian/ jessie/main openclipart-png all 1:0.18+dfsg-14 [128 MB]
Fetched 128 MB in 3s (42.2 MB/s)           

real    0m3.237s
user    0m2.496s
sys 0m0.464s
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;キャッシュされた状態からだと平均で3.13秒（45.1MB/s）&lt;/p&gt;

&lt;p&gt;ということで、12.2MB/s vs 45.1MB/s で3倍は速くなりそう、という雑な結論&amp;hellip;ではありますが、IDCFクラウドで最も低スペックなマシン（light.S1、0.8GHz 1CPU/1GB Mem）で提供してもこの結果が出せたので、そこそこの大きさのVM作っておけば、めっちゃ多くのVMからのアクセスでもコンスタントに出せるようにはなるのでは？という推論。次は「同じサービスで他のネットワークにいるVMから同じことやったらどうなるか？」→これでスピードが出るなら、各サービスでgo-apt-cacher使うようにしたら、どうだろう？という提案になるかも。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2017/10/01/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Sun, 01 Oct 2017 14:39:09 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2017/10/01/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://tracker.debian.org/news/876227&#34;&gt;libmojolicious-plugin-assetpack-perlの更新をアップロード&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.debian.org/mirror/ftpmirror&#34;&gt;ftpsyncスクリプト&lt;/a&gt;が新しくなったよ、というメールをもらっていたので入れ替えた。&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2017/09/30/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Sat, 30 Sep 2017 22:18:59 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2017/09/30/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;体調を崩して諸々が進まず&amp;hellip;。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://tracker.debian.org/pkg/libmojolicious-plugin-renderfile-perl&#34;&gt;libmojolicious-plugin-renderfile-perlの更新をアップロード&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;lintianでUNRELEASEDだったらWarning入れてくれないかな&amp;hellip;（ドジッた）&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;sphinx-intlをアップデートした上でバイナリパッケージ名をsphinx-intlにしてアップロード。&lt;/li&gt;
&lt;li&gt;一旦消えた&lt;a href=&#34;http://cutter.sourceforge.net&#34;&gt;cutter-testing-framework&lt;/a&gt;のDebianパッケージを復活させない？と打診だけ。&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2017/09/27/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Wed, 27 Sep 2017 22:43:43 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2017/09/27/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;&lt;a href=&#34;https://connpass.com/event/64845/&#34;&gt;さくらの夕べ「さくらのVPS ユーザーミートアップ」&lt;/a&gt;のLT枠に参加して&lt;a href=&#34;https://docs.google.com/presentation/d/1_L4a5eXeyYOh6v9VKcvZAg84d6Y8a5go2F8cmO2ATKo/&#34;&gt;debianミラーの宣伝&lt;/a&gt;をしてきました。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2017/09/25/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Mon, 25 Sep 2017 22:41:30 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2017/09/25/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;&lt;a href=&#34;https://events.opensuse.org/conference/summitasia17&#34;&gt;openSUSE.Asia Summit 2017&lt;/a&gt;のトークが通ったので返信。&lt;a href=&#34;https://events.opensuse.org/conference/summitasia17/program/proposal/1512&#34;&gt;openSUSE tools on Debian&lt;/a&gt;というタイトルで15分喋る予定です。資料も大体作成完了。&lt;/p&gt;

&lt;hr /&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=876691&#34;&gt;fonts-arphic-uming FTBFS修正&lt;/a&gt;。&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2017/09/18/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Mon, 18 Sep 2017 04:39:27 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2017/09/18/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;さくら専用サーバーのOSバージョンについては問い合わせておいた。手伝えることがあるとよいのだけども。&lt;/li&gt;
&lt;li&gt;IDCFクラウドのはそろそろ&lt;a href=&#34;https://twitter.com/idcfrontier/status/899915015989469184&#34;&gt;一ヶ月&lt;/a&gt;なのでなんとかならんか。１０月まで待つか&amp;hellip;。&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://cloudgarage.jp/plan/&#34;&gt;Cloudgarade&lt;/a&gt;、規約改定は早かったがDebian対応はまだ。。。

&lt;ul&gt;
&lt;li&gt;10/5に対応いただいた。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;IIJのミラーはできないものかをわかりそうな人に尋ねることに&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2017/09/17/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Sun, 17 Sep 2017 20:14:49 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2017/09/17/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;&lt;a href=&#34;https://manpages.debian.org/stretch/git-buildpackage/gbp-import-orig.1.en.html&#34;&gt;gbp-import-orig&lt;/a&gt;のこのオプション、multiple upstream tarball用じゃないか。いつ追加されてた？&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;--component=COMPONENT
When importing the upstream tarball also look for an additional tarball with component name COMPONENT. E.g. in hello-debhelper_1.0.orig-foo.tar.gz the component would be foo. The additional tarball is expected to be in the same directory than the upstream tarball and to use the same compression type.
 
Using additional original tarballs is a feature of the 3.0 (quilt) source format. See the dpkg-source manpage for details. This is currently considered an experimental feature and might change incompatibly.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;でも「実験的機能」なのか。。。継続ウォッチだな。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;openSUSE Asia summit 2017で話をすることにしているんので資料作成。
するとロゴを入れたくなる、が上演権はともかくその後の資料の配布を考えると無難なライセンスにしておきたい。Debianのロゴはもんだいないのだが、openSUSEのロゴはどうかしら？&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;この辺から探して下さい
https://en.opensuse.org/Portal:Artwork
https://github.com/openSUSE/artwork

ロゴそのもののライセンスは:
https://en.opensuse.org/openSUSE:Trademark_guidelines

その他は CC-BY-SA 3.0 のものが多いです
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;とのことでCC-BY-SA 3.0のopenSUSEロゴを１つ入れてみた。何となくそれらしくなった気がする。Debianのも同じライセンスなので問題なし。
足りない部分の資料は今回は来られないAndrewにお願いしてみた。&lt;/p&gt;

&lt;hr /&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ミラーサーバー、ディスク80%消費していて継続的に2%使ってる＝１０ヶ月後には溢れてる、なのでご相談メールを。今後も使えるかどうか、もしかしたら「もう無理だねー」と言われるかもしれないけど。生かされてる風味。&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ところで老舗 iij.ad.jp のミラーも置いてほしいのですが、誰が窓口なのかしら？（momonga置きっぱなし放置するぐらいならあれはアーカイブとか行って別のところに置いてあげたほうが救われるのでは&amp;hellip;？）&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2017/09/15/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Fri, 15 Sep 2017 21:24:55 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2017/09/15/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;今回はパッケージメンテナじゃなくてサーバーのメンテナンスの話。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://server.sakura.ad.jp/specification/&#34;&gt;さくらの専用サーバー&lt;/a&gt;でDebian7だけになってるのが気になったのだけど、今貸してもらっているサーバーはHPのRAID使ってた関係で&lt;a href=&#34;http://downloads.linux.hpe.com/SDR/repo/mcp/Debian/dists/&#34;&gt;hp側&lt;/a&gt;のアップデートが無いと使えないんじゃないか？という点に思い至った。あ、でも&lt;a href=&#34;http://server.sakura.ad.jp/common/pdf/sd_spec.pdf&#34;&gt;仕様&lt;/a&gt;によると、今はNEC Express5800 E120f-MかFujitsu PRIMERGY RX1330 M2/RX2530 M2 だから違うのかな？&lt;/p&gt;

&lt;p&gt;何にせよ、debian-mirror.sakura.ne.jpのアップデートはしたいので問い合わせモードに。昔この件でhp側のサポートの人とやり取りしたから、とりあえずhp側の対応をもう一度確認してみるか。。。あ、hpからhpeになったから送れない&amp;hellip;→s/hp/hpe/だけだったのでサクッと。&lt;/p&gt;
</description>
          </item>
        
      
    
  </channel>
</rss>
