<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Forget me not... on Forget me not...</title>
    <link>https://henrich.github.io/blog/</link>
    <description>Recent content in Forget me not... on Forget me not...</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja-JP</language>
    <managingEditor>henrich@debian.org (Hideki Yamane)</managingEditor>
    <webMaster>henrich@debian.org (Hideki Yamane)</webMaster>
    <copyright>2015-  Hideki Yamane</copyright>
    <lastBuildDate>Fri, 01 Jan 2100 06:58:34 +0900</lastBuildDate>
    <atom:link href="/blog/" rel="self" type="application/rss+xml" />
    
      
        
          <item>
            <title>future work</title>
            <link>https://henrich.github.io/blog/2100/01/01/future-work/</link>
            <pubDate>Fri, 01 Jan 2100 06:58:34 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2100/01/01/future-work/</guid>
            <description>

&lt;h1 id=&#34;支援について&#34;&gt;支援について&lt;/h1&gt;

&lt;p&gt;このBlogにあるようなDebian関連の作業について支援して頂ける方、henrich @ debian.org 宛に&lt;a href=&#34;http://amzn.to/2u7MfE5&#34;&gt;Amazonギフト券&lt;/a&gt;でのコントリビューションをお待ちしております :-)&lt;/p&gt;

&lt;h2 id=&#34;とりあえずのtodoリスト&#34;&gt;とりあえずのTodoリスト&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;openQAをビルドできるように、必要なツールをパッケージにする

&lt;ul&gt;
&lt;li&gt;Selenium::Remote::Driver &lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=839569&#34;&gt;Bug#839569&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://build.opensuse.org/package/view_file/openSUSE:Factory/openQA/openQA.spec?expand=1&#34;&gt;specファイル&lt;/a&gt;参照&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://lintian.debian.org/maintainer/pkg-fonts-devel@lists.alioth.debian.org.html&#34;&gt;pkg-fonts-devel&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;afdkoをビルドできるように、必要なツールをパッケージにする&lt;/li&gt;
&lt;li&gt;ttf- パッケージを可能な限りdropする（現在55個）&lt;/li&gt;
&lt;li&gt;duplicate font fileをなくす&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;webwmlリポジトリをcvsからgitに変換する。その際にはcommitしたユーザー情報を用意する&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=719557&#34;&gt;mecabパッケージのバグ修正&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=796882&#34;&gt;hyperv-daemonsの修正&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;sylpheed関連パッケージでGPG鍵確認処理を追加&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2018/01/29/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Mon, 29 Jan 2018 22:50:46 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/29/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;Sylpheedパッケージのリポジトリをsalsaに作成。過去のaliothのはdebianディレクトリ以下だけで、私には扱いづらかったので、別の独立したリポジトリとして含めている。&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code&gt;$ git checkout --orphan mones
$ git rm --cached -r *
$ rm -r ./*
$ git pull alioth master
$ git push salsa mones
&lt;/code&gt;&lt;/pre&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2018/01/28/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Sun, 28 Jan 2018 09:16:36 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/28/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>

&lt;ul&gt;
&lt;li&gt;qrencodeパッケージをsalsaに配置してもらって、&lt;a href=&#34;https://salsa.debian.org/debian/qrencode/commit/503acbc181d89a30c0c672fb0fb41e7f792d5d7a&#34;&gt;前に報告した些細な修正&lt;/a&gt;をぶっこむなど。別ブランチにしてマージしてもらったほうがスマートだっただろうか？&lt;/li&gt;
&lt;li&gt;同じくqrencodeパッケージの報告者の勘違いに起因すると思われる&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=677984&#34;&gt;バグ&lt;/a&gt;&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=611266&#34;&gt;二つ&lt;/a&gt;をクローズしておいた&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;qrencode は upstream が Git 使ってないときから作業していたので、リポジトリは debian アーカイブから生成されたものになっている。masterブランチをdebianブランチと変えてgbp.confでdebianブランチがdebianであることを明示している。&lt;/p&gt;

&lt;p&gt;さて、ここでupstreamのmergeを従来通りのtarballで実施するのか、それともupstreamのgit repositoryをmasterとして追加して都度mergeするのか、というのを考えた時、後者のほうがスマートであるように思える。前にも書いたかもしれないが手順を改めて整理しておこう。&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;まず、debianブランチ上のupstream由来ファイルを全て消す＝debianディレクトリ以外を消す。&lt;code&gt;mv debian /tmp; git rm -r ./*; mv /tmp/debian ./; git add debian; git commit -av&lt;/code&gt; などとした。&lt;/li&gt;
&lt;li&gt;つぎに親が同一ではないブランチ（orphan branch)を作る &lt;code&gt;git checkout --orphan master&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;この段階では debianディレクトリが残ってしまってるので、含まれないようにこれも消す &lt;code&gt;git rm --cached -r debian&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;git remote add upstream https://github.com/fukuchi/libqrencode&lt;/code&gt; でupstreamを引っ張ってくる&lt;/li&gt;
&lt;li&gt;&lt;code&gt;git pull upstream master&lt;/code&gt;したがtag持ってこなかったから&lt;code&gt;git pull upstream&lt;/code&gt;も実行&lt;/li&gt;
&lt;li&gt;&lt;code&gt;git checkout debian&lt;/code&gt;して、同一ヒストリをもたないorphanなブランチと無理やりマージさせるために &lt;code&gt;git merge v4.0.0  --allow-unrelated-histories&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;上記の変更点がackされたら提案したい&lt;/p&gt;

&lt;hr /&gt;

&lt;ul&gt;
&lt;li&gt;svn-workbenchの&lt;a href=&#34;http://pysvn.tigris.org/issues/show_bug.cgi?id=212&#34;&gt;1行パッチをフォワード&lt;/a&gt;。使いづらいな。。。&lt;/li&gt;
&lt;li&gt;svn-workbenchのdebian/copyrightをcopyright format 1.0にコンバートしてsalsaに移動してpush、アップロードもしておいた。&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;ul&gt;
&lt;li&gt;tiarraもsalsaに移動したけど、気になるメッセージが出てた&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code&gt;dh_install                                                                                                                         
perl /build/tiarra-20100212+r39209/debian/handle_version.pl /build/tiarra-20100212+r39209/debian/tiarra/usr/share/tiarra/tiarra

Constants from lexical variables potentially modified elsewhere are deprecated. This will not be allowed in Perl 5.32 at main/Tiarra/Utils/DefineHelper.pm line 351. 
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;該当の所を見るとtiarra内の関数じゃなくてライブラリ使えとあったのでそのようにして-とりあえずまずはexperimentalに放り込んで使ってみることにする&#34;&gt;該当の所を見るとtiarra内の関数じゃなくてライブラリ使えとあったのでそのようにして、とりあえずまずはexperimentalに放り込んで使ってみることにする。&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;libdvd-pkgなるものを見つけたが、httpでダウンロードするのは嫌だなぁと思っていた所すでにBTSに上がっていたので、中身を見てみる。なんか変に入り組んだ構造だが、無視して&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=865347&#34;&gt;パッチしておいた&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;ul&gt;
&lt;li&gt;sylpheedのパッケージをアップデートしてみようとしてdh11にしたらビルドエラーになって苦しむ。どうもautoreconfして生成したconfigureがおかしい。ごそごそ弄って対処。&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2018/01/27/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Sat, 27 Jan 2018 01:26:00 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/27/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;[snapperのmanpageで/etc/sysconfigのままになっとるやんけ、という指摘]()。あー昔気づいて直さないとなぁ、と思ったきり忘れていた件でした。単にDebian側でパッチ当てるというのがシンプルなんですけど、debian/patches以下を増やしたくはないのでconfigure.acをいじってちゃんと条件分岐するようにして&lt;a href=&#34;https://github.com/openSUSE/snapper/pull/386&#34;&gt;Pull Request&lt;/a&gt;。&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code&gt;--- configure.ac.orig   2018-01-27 15:56:50.839599352 +0000
+++ configure.ac        2018-01-27 16:24:56.910015986 +0000
@@ -60,11 +60,14 @@
 
 fillupdir=/var/adm/fillup-templates
 
+SYSCONFIG=/etc/sysconfig
+
 AC_ARG_WITH([conf], AC_HELP_STRING([--with-conf], [Use a custom sysconfig directory (default is /etc/sysconfig)]),
        [with_conf=$withval], [with_conf=no])
 
-AS_IF([test &amp;quot;x$with_conf&amp;quot; != xno], [CPPFLAGS=&amp;quot;${CPPFLAGS} -DCONFDIR=&#39;\&amp;quot;${with_conf}\&amp;quot;&#39;&amp;quot;],
-       [CPPFLAGS=&amp;quot;${CPPFLAGS} -DCONFDIR=&#39;\&amp;quot;/etc/sysconfig\&amp;quot;&#39;&amp;quot;])
+AS_IF([test &amp;quot;x$with_conf&amp;quot; != xno], [SYSCONFIG=&amp;quot;${with_conf}&amp;quot;])
+
+CPPFLAGS=&amp;quot;${CPPFLAGS} -DCONFDIR=&#39;\&amp;quot;${SYSCONFIG}\&amp;quot;&#39;&amp;quot;
 
 AC_ARG_ENABLE([btrfs], AC_HELP_STRING([--disable-btrfs],[Disable Btrfs internal snapshots support]),
                [with_btrfs=$enableval],[with_btrfs=yes])
@@ -153,6 +156,7 @@
 AC_SUBST(LIBVERSION_MINOR)
 AC_SUBST(LIBVERSION_PATCHLEVEL)
 AC_SUBST(LIBVERSION_INFO)
+AC_SUBST(SYSCONFIG)
 AC_SUBST(docdir)
 AC_SUBST(fillupdir)


diff --git a/doc/snapper.xml.in b/doc/snapper.xml.in
index 1507b5d..9073ab3 100644
--- a/doc/snapper.xml.in
+++ b/doc/snapper.xml.in
@@ -686,7 +686,7 @@
     &amp;lt;title&amp;gt;FILES&amp;lt;/title&amp;gt;
     &amp;lt;variablelist&amp;gt;
       &amp;lt;varlistentry&amp;gt;
-       &amp;lt;term&amp;gt;&amp;lt;filename&amp;gt;/etc/sysconfig/snapper&amp;lt;/filename&amp;gt;&amp;lt;/term&amp;gt;
+       &amp;lt;term&amp;gt;&amp;lt;filename&amp;gt;@SYSCONFIG@/snapper&amp;lt;/filename&amp;gt;&amp;lt;/term&amp;gt;
        &amp;lt;listitem&amp;gt;
          &amp;lt;para&amp;gt;Global configuration file.&amp;lt;/para&amp;gt;
        &amp;lt;/listitem&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2018/01/26/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Fri, 26 Jan 2018 23:34:14 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/26/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;先日のsnapperパッケージのメンテ続きで &lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=887292&#34;&gt;&amp;ndash;disable-ext4 オプション明示で処置&lt;/a&gt;。stringsコマンドで中身を見てチェック→参照なし！ということでアップロードした。こいつもsalsa移行組。&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2018/01/25/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Thu, 25 Jan 2018 23:05:20 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/25/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=888134&#34;&gt;screenfetchをdockerで動かしたら一部の出力でcommand not foundが出てきた、というレポート&lt;/a&gt;。でもテストしたVPSで作ったminimalなdebootstrap環境だと再現できねぇな？と思って該当の所を見る&amp;hellip;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;        thermal=&amp;quot;/sys/class/hwmon/hwmon0/temp1_input&amp;quot;
        if [ -e $thermal ]; then
                temp=$(bc &amp;lt;&amp;lt;&amp;lt; &amp;quot;scale=1; $(cat $thermal)/1000&amp;quot;)
        fi
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;おおぅ、なるほど。/sys/class/hwmon/hwmon0/temp1_inputなんてVMの環境下には生えてないからスルーしてたわけだ。よし、確認のため実マシンでdebootstrap&amp;hellip;しようとしたらdashのバグの影響を踏んでdebootstrap出来ない！&amp;hellip;別マシンで過去のchrootな環境を見つけてそこでテストして漸く確認。ついでにpgrepもcommand not found出てきたのはホスト側でXが動いているからか（報告者のdockerでは動いてなかったのだろう）。&lt;/p&gt;

&lt;p&gt;で、チャチャッと変更して&amp;hellip;問題はこのrepositoryはaliothにまだあることでsalsaへのインポートを試してないこと。どうやるんだっけ&amp;hellip;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://lists.debian.org/debian-devel-announce/2017/12/msg00003.html&#34;&gt;debian-devel-announceなメール&lt;/a&gt;から&lt;a href=&#34;https://wiki.debian.org/Salsa/Doc&#34;&gt;Debian Wiki&lt;/a&gt;へ、そして&lt;a href=&#34;http://www.df7cb.de/blog/2017/Salsa_batch_import.html&#34;&gt;該当の情報&lt;/a&gt;を取得。&lt;/li&gt;
&lt;li&gt;スクリプトをコピーする&lt;/li&gt;
&lt;li&gt;GitLabのTokenを初めて生成してスクリプトに埋め込み &lt;code&gt;./salsa-import.sh screenfetch&lt;/code&gt; という感じで実行&amp;hellip;一瞬で終わって「え？マジ終わり？」という感想。&lt;/li&gt;
&lt;li&gt;無事にインポートされてるのを確認&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ここからはいつもどおりビルド→アップロード。gitのremote repo設定からaliothを消してsalsaを追加しておく。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2018/01/23/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Tue, 23 Jan 2018 21:16:11 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/23/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;snapperパッケージのメンテ。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=880144&#34;&gt;aptが動いたときの自動スナップショットを無効にできないか？調整する設定を追加してはどうか？という提案&lt;/a&gt;。「デフォルト有効ならいいように思う」とコメント。&lt;/li&gt;
&lt;li&gt;e2fsprogsがessentialパッケージでなくなるのに伴い、&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=887292&#34;&gt;e2fsprogsに依存してるみたいなんだけど、明示的にしてくれる？&lt;/a&gt;というバグレポート。ext4サポートがそもそも動いてなかったから明示的にdisableにするかーという結論なんだけど、確認方法がわからないとリリースできない。&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2018/01/17/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Wed, 17 Jan 2018 19:33:48 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/17/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;新しい&lt;a href=&#34;http://debian-mirror.sakura.ne.jp&#34;&gt;debian-mirror.sakura.ne.jp&lt;/a&gt;の稼働に伴い&lt;a href=&#34;http://old-debian-mirror.sakura.ne.jp/munin/&#34;&gt;munin&lt;/a&gt;の設定を微調整。&lt;/li&gt;
&lt;li&gt;新旧ミラーサーバーにて、自ホストをサーバーにして apt でパッケージを取得してみた。旧サーバーが65MB程度のところ、新サーバーだと95MB程度は出るので1.5倍というところか（乱暴だけど）。&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.documentfoundation.org/show_bug.cgi?id=115066&#34;&gt;LibO on macOSで日本語パック当てるとフォントでかいよ問題をレポートしておいた&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2018/01/16/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Tue, 16 Jan 2018 21:22:06 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/16/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;qrencodeパッケージの&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=677984#13&#34;&gt;バグレポートにコメント追加しておいた&lt;/a&gt;。数日様子を見てクローズするのが良いだろうと思う。&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://tracker.debian.org/news/901773&#34;&gt;fonts-sawarabi-minchoパッケージをアップロード&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;salsaに移行する際にgitのURLが「git@salsa.debian.org:fonts-team/fonts-sawarabi-mincho.git」のように設定されているのにモニョモニョしている。今までは「git+ssh://anonscm.debian.org/&amp;hellip;git」のようにプロトコル指定だったが、これを追加するとエラーになる。でもgitコマンドはSSH使ってsalsaにアクセスしている。何故だ。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2018/01/15/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Mon, 15 Jan 2018 19:18:27 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/15/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;昨日苦しんだ問題を&lt;a href=&#34;https://github.com/fukuchi/libqrencode/issues/117&#34;&gt;upstreamにissue報告した&lt;/a&gt;。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2018/01/14/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Sun, 14 Jan 2018 22:06:00 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/14/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;qrencodeパッケージがちょっと古くなっているようだ。&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=887144&#34;&gt;upstreamのサイトが移動してるね、ということでBTS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ついでに自分の手元でアップデート出来ないかな？と作業して大方できた。新規追加されたtestスクリプトがconfigureを引数なしでハードコードしていて実行されるのでパッケージのインストールが壊れるという問題があったのに引っかかって小一時間潰してしまった&amp;hellip;。&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>subversionからお引っ越し</title>
            <link>https://henrich.github.io/blog/2018/01/13/subversion%E3%81%8B%E3%82%89%E3%81%8A%E5%BC%95%E3%81%A3%E8%B6%8A%E3%81%97/</link>
            <pubDate>Sat, 13 Jan 2018 21:51:19 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/13/subversion%E3%81%8B%E3%82%89%E3%81%8A%E5%BC%95%E3%81%A3%E8%B6%8A%E3%81%97/</guid>
            <description>&lt;p&gt;www.debian.or.jpのコンテンツはSubversionで管理していて、コミット可能なのはJPのメンバーだけだったのだけど、salsa.debian.orgに引っ越して見通しを良くしてみたくなったので作業した。&lt;/p&gt;

&lt;p&gt;svn2gitを使いコンバート。&lt;/p&gt;

&lt;p&gt;非常にわかりづらい（というか導線がない？）のだけど、GitLabにOrganizationというかTeamというかを登録するページからdebianjp-teamとして登録し、適当なsub projectとしてwebを作り、コンバートしたGit repositoryを突っ込む。&lt;/p&gt;

&lt;p&gt;Ansibleで&lt;a href=&#34;https://cloudgarage.jp/&#34;&gt;CloudGarage&lt;/a&gt;のVPSへデプロイ（ここで現状のサイトコンテンツの更新手順に更新漏れを見つけたり）。CloudGarageさんは&lt;a href=&#34;https://cloudgarage.jp/dap/&#34;&gt;開発者支援プログラム&lt;/a&gt;を使わせてもらっていて助かる。相変わらず書いたplaybook.ymlがちょっと出来のいいバッチファイル程度なのが気になるけど、仕方がない。&lt;/p&gt;

&lt;p&gt;とまぁ、そんなこんなで時間を使った。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2018/01/08/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Mon, 08 Jan 2018 19:55:35 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/08/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://tracker.debian.org/news/900074&#34;&gt;fonts-oradano-mincho-gsrrをアップロード&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://tracker.debian.org/news/900087&#34;&gt;birdfontをアップロード&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ミラーサーバーのリソースがCPUを中心に余ってるので、GitLab Runnerにホストを提供しようと思ったのだけども、salsa-adminに問い合わせた所「無理かもー」ともらった。排他的にサービスを提供する、という点だけがネック。&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2018/01/07/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Sun, 07 Jan 2018 13:47:02 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2018/01/07/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;年末年始で間が空いてしまった&amp;hellip;。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://tracker.debian.org/news/899819&#34;&gt;libxmlbirdをアップデート&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;年末年始でようやく新しいミラーサーバー new-debian-mirror.sakura.ne.jp の設定に手を付けました（ありがとうございます＞さくらインターネットさま）。初めてのAnsible&amp;hellip;ですが、今のところはバッチファイルよりちょっとマシ程度の状況。やはり複数サーバー運用して整理するのが必要とかじゃないとモチベーションが湧かないですね&amp;hellip;。まぁ、次にセットアップが必要になった場合は一発流せばいいだけというのは気楽にはなりました。&lt;/p&gt;

&lt;p&gt;新しいサーバーにはbcacheを使っています、&lt;a href=&#34;https://wiki.archlinux.jp/index.php/Bcache&#34;&gt;ありがとうArch Wiki&lt;/a&gt;。ディスクを大量に積むのもよいのですが、既に後2年ぐらいは戦えそうな容量を頂けたので、SSDでキャッシュする方向に走るのが良いかな、と。速度はそこまで出ないにしてもアクセスが多くなっても大丈夫よ、と。&lt;/p&gt;

&lt;p&gt;CacheデバイスのSSDですが、最初はRAID1を設定してもらっていましたが、思い直して設定変更。JBODが選べないので仕方なくRAID0にしました。生まれて初めて使ったよ、RAID0&amp;hellip;。HDDよりは死にづらいかなーというのと、死んでも構わないよねー（負荷が増えるだけ）というのと、容量が欲しかったんや&amp;hellip;というのの3点からRAID0選択と相成りました。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#!/bin/sh

BACKING_DEVICE=/dev/sda3
CACHE_DEVICE=/dev/sdb

make-bcache -B $BACKING_DEVICE -C $CACHE_DEVICE

echo `bcache-super-show $CACHE_DEVICE | grep cset.uuid | awk &#39;{print $2}&#39;` \
 &amp;gt; /sys/block/bcache0/bcache/attach

if [ -f /dev/bcache0 ]; then
  mkfs.xfs /dev/bcache0
else
  echo &amp;quot;There&#39;s no Bcache device.&amp;quot;
fi
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;手作業でやったのを後からまとめ直すと上記のような感じ。短いな&amp;hellip;。チューンしたほうがいい点があるのかもしれませんが、知見がないのでデフォルト値そのまま。ファイルシステムにxfs選んだのは毎度ext?なので、ちょっとは変わったことしたかったのと、btrfsの利点を活かせることはなさそうだよなぁ、という辺りから。&lt;/p&gt;

&lt;p&gt;ufwを実行しようかどうしようか、という辺りとSNMP監視が出来てない風味だよね？というのを確認したら、終わり。そして、切り替え前後でおかしなことが起きたらその対処、と。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;muninの設定続き。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo munin-run http_loadtime auto
http___localhost_.value /etc/munin/plugins/http_loadtime: line 105: -f: command not found
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;$time_binというのが無いようだ。&lt;code&gt;which time&lt;/code&gt; してるだけなのに、見つからない？timeパッケージにあるのだけど、これが入ってないんだな&amp;hellip;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo munin-run acpi
/etc/munin/plugins/acpi: 1: eval: bc: not found
thermal_zone0.value
/etc/munin/plugins/acpi: 1: eval: bc: not found
thermal_zone1.value

$ sudo apt install bc

$ sudo munin-run acpi
thermal_zone0.value 49.000
thermal_zone1.value 40.000
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;これはbc。&lt;/p&gt;

&lt;p&gt;Suggestsにあるのが多いパターンなのだけど、それを確認して入れろ、というのはしんどくないかなぁ。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2017/12/23/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Sat, 23 Dec 2017 20:17:49 +0900</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2017/12/23/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://tracker.debian.org/news/895990&#34;&gt;apt-listchangesのpo訳が取り込まれました&lt;/a&gt;。&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://salsa.debian.org/&#34;&gt;https://salsa.debian.org/&lt;/a&gt; が動き始めたようだ。リポジトリは自動で移動したりするのだろうか？&lt;/li&gt;
&lt;li&gt;とりあえず二要素認証をOnに&amp;hellip;と思って有効にしようとしたら、まずはQRコードをGoogle Authenticatorで読み取って有効にしないといけなかった。その上でYubiKeyを追加。何故この手順が必要なのだろう？デバイスが1つだけじゃない、ということが重要？&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;ul&gt;
&lt;li&gt;boot時のエラーメッセージが気になったので、BIOSを上げてみようと思い立つ。そう言えば昔grubから直接ISOイメージ起動した記憶が&amp;hellip;と思って&lt;a href=&#34;http://www.thinkwiki.org/wiki/BIOS_Upgrade&#34;&gt;調べる&lt;/a&gt;と&lt;a href=&#34;https://packages.debian.org/stretch/grub-imageboot&#34;&gt;grub-imageboot&lt;/a&gt;というツールがあったのでインストール、&lt;a href=&#34;https://download.lenovo.com/pccbbs/mobiles/j5uj58ww.txt&#34;&gt;該当のBIOSのISOイメージ&lt;/a&gt;をダウンロードして、bootできるようにして再起動&amp;hellip;したのだけども、うんともすんとも言わず。仕方がないのでUSBメモリに書き出す方法の方で対応した。&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apt install genisoimage
$ geteltorito biosimage.iso &amp;gt; biosupdate.img
$ sudo dd if=biosupdate.img of=/dev/sdb bs=512K
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
&lt;li&gt;BIOSは最新になった、でも消えない。。。ってあれ、これmicrocodeって言ってるからCPUじゃね？ということで &lt;code&gt;apt install intel-microcode&lt;/code&gt; で直った（&lt;a href=&#34;https://tracker.debian.org/pkg/intel-microcode&#34;&gt;最新のパッケージはbackports提供&lt;/a&gt;なので、Stretchの人はbackportsから入れると良い）。AMDなCPUの人もamd-microcodeで。どちらもnon-freeコンポーネントに含まれてるが、まぁbinaryだしどうしようもないだろうなぁ。TPMのエラーもBIOSで有効にしたら消えた。残ってるのはACPIなエラーだけ。&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
  </channel>
</rss>
