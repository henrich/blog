<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Forget me not... on Forget me not...</title>
    <link>https://henrich.github.io/blog/</link>
    <description>Recent content in Forget me not... on Forget me not...</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja-JP</language>
    <managingEditor>henrich@debian.org (Hideki Yamane)</managingEditor>
    <webMaster>henrich@debian.org (Hideki Yamane)</webMaster>
    <lastBuildDate>Mon, 06 May 2019 00:00:00 +0000</lastBuildDate>
    <atom:link href="/blog/" rel="self" type="application/rss+xml" />
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2019/05/06/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Mon, 06 May 2019 00:00:00 +0000</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2019/05/06/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;firefox-esrでの証明書問題でoldstable向けに騒いでたのが居たので、&lt;a href=&#34;https://lists.debian.org/debian-lts/2019/05/msg00016.html&#34;&gt;LTSメーリングリストにmentionを飛ばして&lt;/a&gt;、コマンドメールでfixedバージョンを追加しておいた。&lt;/li&gt;
&lt;li&gt;gsの修正がunblock依頼が出てなかったので&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=927429#42&#34;&gt;つついた&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;linux-image-4.19.0-4-amd64で、Xがまともに立ち上がらない件、複数のバグレポートが上がっていたのでもう一つの方に「あっちも同じ問題じゃね？」とだけコメントしたらマージしてくれた様子。あとは次のリリースで加わるといいね。&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2019/04/30/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Tue, 30 Apr 2019 00:00:00 +0000</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2019/04/30/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;手元の日経Linux誌見たらPPA指定が必要になっていた&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=928217&#34;&gt;aobookのITP&lt;/a&gt;登録してuploadしといた。現実逃避だけど。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;a href=&#34;https://togetter.com/li/1342936&#34;&gt;「OpenJDK 11.0.3/8u212 LTS以降でのリリースノートや脆弱性の追い方」&lt;/a&gt;は一読しただけでは理解が追いつかないな…。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;code&gt;debian/watch&lt;/code&gt;のOSDNでの書き方は下記が良いらしい。うーん、RSS必死に見てたのは不要だったか…&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;https://osdn.net/projects/@PACKAGE@/releases/rss \
 https://osdn.net/projects/@PACKAGE@/downloads/\d*/@PACKAGE@-@ANY_VERSION@@ARCHIVE_EXT@/ debian uupdate
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;uscan&lt;/code&gt;にバグ登録したほうが良いか&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;a href=&#34;https://blogs.apache.org/foundation/entry/the-apache-software-foundation-expands&#34;&gt;ASFがGitHubに移行してた&lt;/a&gt;。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;a href=&#34;https://tracker.debian.org/news/1039012/accepted-fonts-ipaexfont-00401-1-source-into-unstable/&#34;&gt;IPAexフォントのアップデート&lt;/a&gt;を放り込んだ。&lt;/p&gt;

&lt;p&gt;upstreamの方に確認したいことがあったので、&lt;a href=&#34;https://www.ipa.go.jp/about/inquiry_index_0.html&#34;&gt;問い合わせページ&lt;/a&gt;から以下のような問い合わせを送った&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;IPAフォントならびにIPAexフォントをLinuxディストリビューション Debianにてパッケージとして配布しています。

問１）IPAフォントならびにIPAexフォントの問題・要望報告先としてOSDNにプロジェクト https://ja.osdn.net/projects/ipafonts/ を開設されていますが、こちらに報告をしても全く反応がありません。今回のIPAexフォントの配布もこちらで実施されてないようです
- こちらのプロジェクトは活動しているのでしょうか
- していないとしたら、どこで誰に連絡をすればよいのでしょうか
- GitHub等に移行はできないでしょうか。

問２）IPAexフォントの配布ページがバージョンごとに毎回URLが変更されており、機械的に新しいバージョンが出ているかのチェックがしずらいのですが、何故この様な形にしているのでしょうか（以前の https://ipafont.ipa.go.jp/old/ipafont/download.html であれば問題なく確認が出来ましたので、改悪と言えます）。
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;code&gt;openjdk-11&lt;/code&gt;パッケージの中身をチェックしようと&lt;code&gt;debcheckout&lt;/code&gt;コマンドで落としたのだが、どうにもおかしい。&lt;code&gt;git checkout &amp;lt;tag&amp;gt;&lt;/code&gt;として古いバージョンなのに令和対応がされてる、というように見えてしまう。悩んだ結果、&lt;code&gt;openjdk-11&lt;/code&gt;パッケージのリポジトリは&lt;code&gt;debian&lt;/code&gt;ディレクトリ以下の保守しかしておらず、&lt;code&gt;debcheckout&lt;/code&gt;コマンドがおせっかいにもtarballを落としてきてたという。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-shell&#34;&gt;$ debcheckout openjdk-11
declared git repository at https://git.launchpad.net/~openjdk/ubuntu/+source/openjdk/+git/openjdk -b openjdk-11
git clone https://git.launchpad.net/~openjdk/ubuntu/+source/openjdk/+git/openjdk -b openjdk-11 openjdk-11 ...
Cloning into &#39;openjdk-11&#39;...
remote: Counting objects: 722, done. 
remote: Compressing objects: 100% (706/706), done. 
remote: Total 722 (delta 422), reused 103 (delta 10)
Receiving objects: 100% (722/722), 824.71 KiB | 241.00 KiB/s, done.
Resolving deltas: 100% (422/422), done.
repository only contains the debian directory, using apt-get source 
パッケージリストを読み込んでいます... 完了   
注意: &#39;openjdk-11&#39; パッケージは以下の場所の &#39;Git&#39; バージョン制御システムで保守されています:
https://git.launchpad.net/~openjdk/ubuntu/+source/openjdk/+git/openjdk -b openjdk-11
パッケージの最新の (まだリリースされていないかもしれない) 更新を取得するには、
git clone https://git.launchpad.net/~openjdk/ubuntu/+source/openjdk/+git/openjdk -b openjdk-11
を使用してください。
75.8 MB のソースアーカイブを取得する必要があります。
取得:1 http://debian-mirror.sakura.ne.jp/debian sid/main openjdk-11 11.0.3+7-4 (dsc) [4,692 B]
取得:2 http://debian-mirror.sakura.ne.jp/debian sid/main openjdk-11 11.0.3+7-4 (tar) [75.4 MB]
取得:3 http://debian-mirror.sakura.ne.jp/debian sid/main openjdk-11 11.0.3+7-4 (diff) [414 kB]
75.8 MB を 1分 32秒 で取得しました (824 kB/s)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;仕方がないのでsnapshot.debian.orgから落としてきてgrepした結果、11.0.3+7-1から令和対応、ということが判明。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;その他、令和対応情報まとめてた。unicode-dataでリビルド必要なの確認（すでにbinNMU依頼済みだったらしい）、FTBFSなのにパッチ書いたりとか。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;code&gt;/etc/mtab&lt;/code&gt;は&lt;code&gt;/proc/self/mounts&lt;/code&gt;だが、これはどこで出来てるのか？というと&lt;a href=&#34;http://blog.keshi.org/hogememo/2013/10/28/about-debian-wheezy-etc-mtab&#34;&gt;/etc/init.d/checkroot.sh らしい&lt;/a&gt;→&lt;code&gt;initscripts&lt;/code&gt;パッケージだから入ってないのもあるんじゃない？（少なくともdebootstrapした環境にはない）と思って新しくインストールしてみた&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;Package: initscripts
Version: 2.94-4
Priority: optional
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;だから無くても仕方がない…が、新規にbusterを入れた環境でも&lt;code&gt;/etc/mtab&lt;/code&gt;がsymlinkとして存在する！なんだこれは。grepしたが、パッケージのメンテナスクリプトで触ってる風味でもない…systemdだろうか？…見つからずに大まかにgrepしなおしたら&lt;code&gt;/usr/lib/tmpfiles.d/debian.conf&lt;/code&gt;とかいうのに記述があった。systemdパッケージの一部らしい。&lt;/p&gt;

&lt;p&gt;ということは&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;initscripts&lt;/code&gt;または&lt;code&gt;systemd&lt;/code&gt;が入ってると&lt;code&gt;/etc/mtab&lt;/code&gt;は&lt;code&gt;/proc/self/mounts&lt;/code&gt;へのsymlinkとして生成される。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;openrc&lt;/code&gt;などではどうなるのだろう？…と思ったら&lt;code&gt;initscripts&lt;/code&gt;が引っ張られて入ったので問題なし。&lt;/li&gt;
&lt;li&gt;上書きされるのだから、debootstrapで記述しても問題ないのでは？&lt;/li&gt;
&lt;li&gt;過去の&lt;code&gt;initscripts&lt;/code&gt;では&lt;code&gt;/etc/mtab&lt;/code&gt;は&lt;code&gt;/proc/mounts&lt;/code&gt;を指してるらしい&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;という感想だったので、パッチ作った→速攻ボコボコにされた。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2019/04/25/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Thu, 25 Apr 2019 00:00:00 +0000</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2019/04/25/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=927914&#34;&gt;glibcの令和対応パッチをupstreamから取ってきてペタペタした&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;対応されたのでbusterは対応になるだろう。stretchどうするかねぇ&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=927857&#34;&gt;openjdk8での令和対応をBTSに登録した&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=927857&#34;&gt;icuでの令和対応をBTSに登録した&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;OpenChainのワーキンググループでツールの話を聞いてきたので、どんな感じかなーと&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=924659&#34;&gt;fosslogyのWNPPバグ&lt;/a&gt;を覗いてみた。&lt;/p&gt;

&lt;p&gt;ついでに&lt;a href=&#34;https://github.com/spdx/tools&#34;&gt;SPDXのtool&lt;/a&gt;のパッケージングが出来ないかを色々と。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2019/04/23/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Tue, 23 Apr 2019 00:00:00 +0000</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2019/04/23/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;ul&gt;
&lt;li&gt;jessieのstable-updatesリポジトリ削除でaptのエラー→jessieを利用してたコンテナ環境がビルド失敗という話題があったが、&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=927776&#34;&gt;「stretchではstable-updatesは削除しないで」というバグをファイルしておいた&lt;/a&gt;。関係する人たちとかにも伝えておいたほうが良いだろうということで、&lt;a href=&#34;https://discuss.circleci.com/t/fyi-asking-debian-ftpmasters-to-not-remove-obsolete-stable-updates-repo-from-mirror/29944&#34;&gt;CircleCI側でも告知しておいた&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2019/04/21/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Sun, 21 Apr 2019 00:00:00 +0000</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2019/04/21/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;fonts-arphic-bkai00mpパッケージの&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=927578&#34;&gt;更新（引退したbubulleをUploadresから削除）&lt;/a&gt;を実施。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;a href=&#34;https://osdn.net/projects/ipafonts/ticket/39148&#34;&gt;IPAフォントの令和対応チケット&lt;/a&gt;を起票しておいた。忘れそうだったので。
最悪、IPAフォントの「令」「和」から「㍻」を真似て作る、だろうか。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;OpenBVE界隈の人がDebianからパッケージが削除されてて困ってたので、スポンサーするよという話をしておいたらWNPPバグに登録したようなので、&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=927278#8&#34;&gt;内容をざっくりレビューしておいた&lt;/a&gt;。疲れた…。ライセンス周りはまだ精査が必要そう。&lt;/p&gt;

&lt;p&gt;一応&lt;a href=&#34;https://salsa.debian.org/debian/openbve&#34;&gt;リポジトリは用意しておいた&lt;/a&gt;。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2019/04/20/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Sat, 20 Apr 2019 00:00:00 +0000</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2019/04/20/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;fluentdのrubyサポートバージョンについて、&lt;a href=&#34;https://github.com/fluent/fluentd/issues/2380?fbclid=IwAR2GhPl7EEX5m-bTf4GbfTzc3yex5N-2bHReQ5B07-tdP6QnQ_Oqz-upo0w&#34;&gt;各distroではこうなんだから、もう切っちゃっても良いんじゃない？&lt;/a&gt;というのを書いてきた。まぁ、継続されても別に問題はないんだけど。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;で、パッケージング。通ったり通らなかったりするテストを落として、名前がかぶるテストを名前変えて、ようやく100%通るように。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ruby&#34;&gt;-------------------------------------------------------------------------------
2705 tests, 10932 assertions, 0 failures, 0 errors, 0 pendings, 0 omissions, 0 notifications  
100% passed
-------------------------------------------------------------------------------
3.13 tests/s, 12.67 assertions/s
rake aborted!
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ちょ、なんで100% passedなのに&lt;code&gt;rake aborted!&lt;/code&gt;なのよ？このために止まってる。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2019/04/19/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Fri, 19 Apr 2019 00:00:00 +0000</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2019/04/19/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;武藤さんに&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=927263&#34;&gt;rieceが起動しないバグ&lt;/a&gt;を見つけてもらって、木下さんにも助力いただき対応策が分かったので適用して閉じた&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2019/04/16/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Tue, 16 Apr 2019 00:00:00 +0000</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2019/04/16/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;まずは&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=926570&#34;&gt;ruby-sigdumpパッケージが入った&lt;/a&gt;。これでbuild用の独自chroot環境なくすのに一歩近づいた。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2019/04/15/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Mon, 15 Apr 2019 00:00:00 +0000</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2019/04/15/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;残りのメモ。まだ長いなぁ。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;    fontforge (U)        should switch to dh. Current build system: cdbs (source version: 1:20170731~dfsg-1)
    fontforge (U)        git repository still hosted on alioth. Should move to salsa. (source version: 1:20170731~dfsg-1)
    fonts-arphic-gkai00mp (U) git repository still hosted on alioth. Should move to salsa. (source version: 2.11-15)
    fonts-breip (U)      git repository still hosted on alioth. Should move to salsa. (source version: 1:0.5.1-1)
    fonts-ipafont (U)    git repository still hosted on alioth. Should move to salsa. (source version: 00303-18)
    fonts-kacst (U)      does not use a VCS for package maintenance. should switch to git on salsa. (source version: 2.01+mry-14)
    fonts-takao (U)      git repository still hosted on alioth. Should move to salsa. (source version: 00303.01-2)
    libtest-mock-time-perl (U) git repository still hosted on alioth. Should move to salsa. (source version: 0.1.7-1)
    ruby-twitter-text (U) git repository still hosted on alioth. Should move to salsa. (source version: 1.14.7+conformance-1)
&lt;/code&gt;&lt;/pre&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2019/04/14/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Sun, 14 Apr 2019 00:00:00 +0000</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2019/04/14/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;ひたすらbad smellを消す作業。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;    fonts-dejima-mincho (U) git repository still hosted on alioth. Should move to salsa. (source version: 227-15)
    fonts-oradano-mincho-gsrr (U) git repository still hosted on alioth. Should move to salsa. (source version: 0.2018-1)
    fonts-ricty-diminished (U) git repository still hosted on alioth. Should move to salsa. (source version: 4.1.1-1)
    fonts-kouzan-mouhitsu (U) git repository still hosted on alioth. Should move to salsa. (source version: 20170411-2)
    fonts-motoya-l-cedar (U) git repository still hosted on alioth. Should move to salsa. (source version: 1.01-4)
    fonts-motoya-l-maruberi (U) git repository still hosted on alioth. Should move to salsa. (source version: 1.01-4)
    fonts-kacst-one (U)  git repository still hosted on alioth. Should move to salsa. (source version: 5.0+svn11846-9)
    libexport-attrs-perl (U) git repository still hosted on alioth. Should move to salsa. (source version: 0.1.0-1)
    libmojolicious-plugin-renderfile-perl (U) git repository still hosted on alioth. Should move to salsa. (source version: 0.12-1)
    libsql-tokenizer-perl (U) git repository still hosted on alioth. Should move to salsa. (source version: 0.24-2)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;    octicons (U)         git repository still hosted on alioth. Should move to salsa. (source version: 4.4.0-2)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;octiconsはやたら以前にupstreamブランチをマージしたけど、依存パッケージが多くなってしまっていてどうしたものか…&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;    fonts-arphic-bsmi00lp (U) git repository still hosted on alioth. Should move to salsa. (source version: 2.10-17)
    fonts-arphic-gbsn00lp (U) git repository still hosted on alioth. Should move to salsa. (source version: 2.11-15)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;debian/copyright&lt;/code&gt;が旧形式で書き直し必要だよ…後日。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2019/04/13/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Sat, 13 Apr 2019 00:00:00 +0000</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2019/04/13/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;&lt;a href=&#34;https://trends.debian.net&#34;&gt;trends.debian.net&lt;/a&gt;より&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;Hideki Yamane &amp;lt;henrich@debian.org&amp;gt;

    fontforge (U)        should switch to dh. Current build system: cdbs (source version: 1:20170731~dfsg-1)
    fontforge (U)        git repository still hosted on alioth. Should move to salsa. (source version: 1:20170731~dfsg-1)
    fonts-arphic-bsmi00lp (U) git repository still hosted on alioth. Should move to salsa. (source version: 2.10-17)
    fonts-arphic-gbsn00lp (U) git repository still hosted on alioth. Should move to salsa. (source version: 2.11-15)
    fonts-arphic-gkai00mp (U) git repository still hosted on alioth. Should move to salsa. (source version: 2.11-15)
    fonts-breip (U)      git repository still hosted on alioth. Should move to salsa. (source version: 1:0.5.1-1)
    fonts-dejima-mincho (U) git repository still hosted on alioth. Should move to salsa. (source version: 227-15)
    fonts-ipafont (U)    git repository still hosted on alioth. Should move to salsa. (source version: 00303-18)
    fonts-kacst (U)      does not use a VCS for package maintenance. should switch to git on salsa. (source version: 2.01+mry-14)
    fonts-kacst-one (U)  git repository still hosted on alioth. Should move to salsa. (source version: 5.0+svn11846-9)
    fonts-kiloji (U)     git repository still hosted on alioth. Should move to salsa. (source version: 1:2.1.0-23)
    fonts-konatu (U)     git repository still hosted on alioth. Should move to salsa. (source version: 20121218-8)
    fonts-kouzan-mouhitsu (U) git repository still hosted on alioth. Should move to salsa. (source version: 20170411-2)
    fonts-motoya-l-cedar (U) git repository still hosted on alioth. Should move to salsa. (source version: 1.01-4)
    fonts-motoya-l-maruberi (U) git repository still hosted on alioth. Should move to salsa. (source version: 1.01-4)
    fonts-oradano-mincho-gsrr (U) git repository still hosted on alioth. Should move to salsa. (source version: 0.2018-1)
    fonts-ricty-diminished (U) git repository still hosted on alioth. Should move to salsa. (source version: 4.1.1-1)
    fonts-takao (U)      git repository still hosted on alioth. Should move to salsa. (source version: 00303.01-2)
    libexport-attrs-perl (U) git repository still hosted on alioth. Should move to salsa. (source version: 0.1.0-1)
    libmojolicious-plugin-renderfile-perl (U) git repository still hosted on alioth. Should move to salsa. (source version: 0.12-1)
    libspiro (U)         git repository still hosted on alioth. Should move to salsa. (source version: 1:0.5.20150702-7)
    libsql-tokenizer-perl (U) git repository still hosted on alioth. Should move to salsa. (source version: 0.24-2)
    libtest-mock-time-perl (U) git repository still hosted on alioth. Should move to salsa. (source version: 0.1.7-1)
    libtime-mock-perl (U) git repository still hosted on alioth. Should move to salsa. (source version: 0.0.2-2)
    octicons (U)         git repository still hosted on alioth. Should move to salsa. (source version: 4.4.0-2)
    ruby-flexmock (U)    git repository still hosted on alioth. Should move to salsa. (source version: 2.0.4-1)
    ruby-twitter-text (U) git repository still hosted on alioth. Should move to salsa. (source version: 1.14.7+conformance-1)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;とりあえず以下を対処。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;    libspiro (U)         git repository still hosted on alioth. Should move to salsa. (source version: 1:0.5.20150702-7)
    fonts-kiloji (U)     git repository still hosted on alioth. Should move to salsa. (source version: 1:2.1.0-23)
    fonts-konatu (U)     git repository still hosted on alioth. Should move to salsa. (source version: 20121218-8)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;    ruby-flexmock (U)    git repository still hosted on alioth. Should move to salsa. (source version: 2.0.4-1)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;はデータが古い？&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2019/04/10/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Wed, 10 Apr 2019 00:00:00 +0000</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2019/04/10/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;&lt;code&gt;fluentd&lt;/code&gt;パッケージングでのテストエラー続き。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ruby&#34;&gt;? Encoding: US-ASCII-8BIT
===============================================================================
: (0.005571)
    test: should output compressed file when compress option is gzip:   F
===============================================================================
Failure: test: should output compressed file when compress option is gzip(FileOutputSecondaryTest::write)
/build/fluentd-1.4.2/test/plugin/test_out_secondary_file.rb:129:in `check_gzipped_result&#39;
/build/fluentd-1.4.2/test/plugin/test_out_secondary_file.rb:154:in `block (2 levels) in &amp;lt;class:FileOutputSecondaryTest&amp;gt;&#39;
     151:       path = d.instance.write(@chunk)
     152: 
     153:       assert_equal &amp;quot;#{TMP_DIR}/out_file_test.0.gz&amp;quot;, path
  =&amp;gt; 154:       check_gzipped_result(path, @es.to_msgpack_stream.force_encoding(&#39;ASCII-8BIT&#39;))
     155:     end
     156: 
     157:     test &#39;should output plain text when compress option is default(text)&#39; do
&amp;lt;&amp;quot;\x92\xD7\x00\\\xAC\x83\x81\x04\x04Z\x9F\x81\xA3key\xA5value&amp;quot;&amp;gt;(ASCII-8BIT) expected but was
&amp;lt;&amp;quot;\x92\xD7\x00\\\xAC\x83\x81\x04\x04Z\x9F\x81\xA3key\xA5value&amp;quot;&amp;gt;(US-ASCII)

diff:
  潰^@\ｬメ^D^DZ氈｣key･value
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;文字列の比較のようだが、同じ様に見える…のにエンコーディングが違う？どこでこのエンコーディング指定してるのだろう？とTravis CIのログをみてなるほどーとなってパッチ。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-ruby&#34;&gt;  Gem2Deb::Rake::TestTask.new do |t|
    t.libs = [&#39;test&#39;]
    t.test_files = FileList[&#39;test/**/*_test.rb&#39;] + FileList[&#39;test/**/test_*.rb&#39;]
+   t.ruby_opts = [&amp;quot;-Eascii-8bit:ascii-8bit&amp;quot;]
  end
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;しかし、エラーがどうしても一つ潰せず、&lt;a href=&#34;https://github.com/fluent/fluentd/issues/2375&#34;&gt;upstreamにIssueを上げた&lt;/a&gt;。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2019/04/09/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Tue, 09 Apr 2019 00:00:00 +0000</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2019/04/09/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;&lt;code&gt;fluentd&lt;/code&gt;のビルド…テストがエラーになる。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-error&#34;&gt;2748 tests, 11159 assertions, 15 failures, 3 errors, 0 pendings, 0 omissions, 1 notifications
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;という感じ。見ていく。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-error&#34;&gt;Failure: test: dump txt[--format=markdown --verbose --compact](TestFluentPluginConfigFormatter::arguments):
  Exception raised:
  Errno::ENOENT(&amp;lt;No such file or directory @ realpath_rec - /build/fluentd-1.4.2/debian/fluentd/usr/lib/ruby/templates&amp;gt;)
/build/fluentd-1.4.2/test/command/test_plugin_config_formatter.rb:270:in `block (3 levels) in &amp;lt;class:TestFluentPluginConfigFormatter&amp;gt;&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-error&#34;&gt;# grep templates -r ./
(snip)
./lib/fluent/command/plugin_generator.rb:    (Pathname(__dir__) + &amp;quot;../../../templates/new_gem&amp;quot;).realpath
./lib/fluent/command/plugin_config_formatter.rb:    (Pathname(__dir__) + &amp;quot;../../../templates/plugin_config_formatter/#{name}&amp;quot;).realpath
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;/build/fluentd-1.4.2/templates&lt;/code&gt;を見たいのに&lt;code&gt;/build/fluentd-1.4.2/debian/fluentd/usr/lib/ruby/templates&lt;/code&gt;を参照しにいってるので、ここを直せば良い。&lt;a href=&#34;https://salsa.debian.org/ruby-team/fluentd/blob/debian/sid/debian/patches/0004-move-templates-to-appropriate-path.patch&#34;&gt;templatesをlib配下に持っていって相対パスをadjustする&lt;/a&gt;のがよいかね。&lt;/p&gt;

&lt;hr /&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;/usr/lib/ruby/vendor_ruby/flexmock/core.rb:92: warning: instance variable @flexmock_closed not initialized
/usr/lib/ruby/vendor_ruby/flexmock/core.rb:92: warning: instance variable @flexmock_closed not initialized
/usr/lib/ruby/vendor_ruby/flexmock/core.rb:92: warning: instance variable @flexmock_closed not initialized
/usr/lib/ruby/vendor_ruby/flexmock/core.rb:92: warning: instance variable @flexmock_closed not initialized
/usr/lib/ruby/vendor_ruby/flexmock/core.rb:92: warning: instance variable @flexmock_closed not initialized
/usr/lib/ruby/vendor_ruby/flexmock/core.rb:92: warning: instance variable @flexmock_closed not initialized
/usr/lib/ruby/vendor_ruby/flexmock/core.rb:92: warning: instance variable @flexmock_closed not initialized
/usr/lib/ruby/vendor_ruby/flexmock/core.rb:92: warning: instance variable @flexmock_closed not initialized
/usr/lib/ruby/vendor_ruby/flexmock/core.rb:92: warning: instance variable @flexmock_closed not initialized
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;とwarningが5万行も出ていたので、&lt;code&gt;ruby-flexmock&lt;/code&gt;パッケージになにか問題が？と思って見てみると2年ほど更新が滞ってる。パッケージメンテナが降りてしまってるので、&lt;a href=&#34;https://tracker.debian.org/news/1037732/accepted-ruby-flexmock-236-1-source-into-unstable/&#34;&gt;自分を加えて更新してアップロードした&lt;/a&gt;。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;psがない！というエラーが出ていたので、これは最小環境に&lt;code&gt;procps&lt;/code&gt;パッケージが入ってないことによるものだったので、さくっと解決。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;しかしまだまだtest failureは続く…。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2019/04/08/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Mon, 08 Apr 2019 00:00:00 +0000</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2019/04/08/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;パッケージング、残りは&lt;code&gt;ruby-strptime&lt;/code&gt;と&lt;code&gt;ruby-tzinfo-data&lt;/code&gt;か、ということで&lt;a href=&#34;https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=926621&#34;&gt;ruby-strptimeのITP作業&lt;/a&gt;した。&lt;code&gt;ruby-tzinfo-data&lt;/code&gt;の方はtzdataを引っ張ってこれない環境だと必要なのでは？と判断して削る方向で…あ、&lt;a href=&#34;https://bugs.debian.org/926623&#34;&gt;ruby-parallel-tests&lt;/a&gt;も追加。&lt;/p&gt;

&lt;p&gt;これで大体依存関係終わったかな…。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/926266&#34;&gt;ruby-cool.io&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/926570&#34;&gt;ruby-sigdump&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/926572&#34;&gt;ruby-serverengine&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/926621&#34;&gt;ruby-strptime&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://bugs.debian.org/926623&#34;&gt;ruby-parallel-tests&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ここまで来て、ようやく&lt;code&gt;fluentd&lt;/code&gt;のパッケージングに再度入れる。&lt;/p&gt;
</description>
          </item>
        
      
    
      
        
          <item>
            <title>めんてなのおしごと</title>
            <link>https://henrich.github.io/blog/2019/04/07/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</link>
            <pubDate>Sun, 07 Apr 2019 00:00:00 +0000</pubDate>
            <author>henrich@debian.org (Hideki Yamane)</author>
            <guid>https://henrich.github.io/blog/2019/04/07/%E3%82%81%E3%82%93%E3%81%A6%E3%81%AA%E3%81%AE%E3%81%8A%E3%81%97%E3%81%94%E3%81%A8/</guid>
            <description>&lt;p&gt;先日&lt;code&gt;gem2deb&lt;/code&gt;で変換した&lt;code&gt;ruby-dig-rb&lt;/code&gt;を仕上げておこうとしてdescription書く際に&lt;a href=&#34;https://github.com/jrochkind/dig_rb&#34;&gt;サイト&lt;/a&gt;を見て「ん？」と気付く。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;Ruby 2.3.0 introduced #dig on Hash, Array, and Struct. With this gem, you can have dig on ruby pre 2.3.0, or any ruby lacking dig.

If you are writing an app and want to use dig in it you should probably just upgrade to ruby 2.3.0. But if you are writing a gem and want it to work with both MRI 2.3.0 and others (including JRuby 9.0.x), this gem is for you. This gem only adds #dig methods if they aren&#39;t already defined, so it&#39;s safe to use in code that is for all rubies, if run on MRI 2.3.0 you&#39;ll still be using native #dig, otherwise dig_rb&#39;s implementation.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Ruby2.3で同じ機能を導入してるから、CRuby以外の実装で必要だ、という場合以外は不要だということか&amp;hellip;。んでは無視しよう。&lt;a href=&#34;https://github.com/fluent/fluentd/pull/2372&#34;&gt;fluentdにはPR上げてみておいた&lt;/a&gt;。&lt;/p&gt;
</description>
          </item>
        
      
    
  </channel>
</rss>
